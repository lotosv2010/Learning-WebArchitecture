

# Flutterå­¦ä¹ ä¹‹Dartè¯­æ³•ç‰¹æ€§



## Dartä¸€äº›æ¦‚å¿µ

- åœ¨Dartä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ç»§æ‰¿`Object`ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨å˜é‡å¼•ç”¨çš„éƒ½æ˜¯å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªäº†ç±»çš„å®ä¾‹ã€‚åœ¨Dartä¸­ç”šè‡³æ•°å­—ã€æ–¹æ³•å’Œnulléƒ½æ˜¯å¯¹è±¡ã€‚
- æ²¡æœ‰èµ‹åˆå€¼çš„å˜é‡éƒ½ä¼šæœ‰é»˜è®¤å€¼`null`
- æ ‡è¯†ç¬¦å¯ä»¥ä»¥å­—æ¯æˆ–è€…`_`ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢å¯ä»¥æ˜¯å…¶ä»–å­—ç¬¦å’Œæ•°å­—çš„ç»„åˆã€‚
- Dartæ”¯æŒé¡¶çº§æ–¹æ³•ï¼Œå¦‚`main`æ–¹æ³•ï¼ŒåŒæ—¶è¿˜æ”¯æŒåœ¨ç±»ä¸­å®šä¹‰å‡½æ•°(é™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•°)ï¼Œè¿˜å¯ä»¥åœ¨æ–¹æ³•ä¸­å®šä¹‰æ–¹æ³•ï¼ŒDartæ”¯æŒé¡¶å±‚å˜é‡ï¼Œä¹Ÿæ”¯æŒç±»å˜é‡æˆ–å¯¹è±¡å˜é‡ã€‚
- Dartæ²¡æœ‰`public`ã€`protected`ã€`private`å…³é”®å­—ã€‚å¦‚æœæŸä¸ªå˜é‡ä»¥ä¸‹åˆ’çº¿`_`å¼€å¤´ï¼Œä»£è¡¨è¿™ä¸ªå˜é‡æ˜¯åœ¨åº“ä¸­æ˜¯ç§æœ‰çš„ã€‚
- Dartä¸­çš„ç±»å’Œæ¥å£éƒ½æ˜¯ç»Ÿä¸€çš„ï¼Œç±»å³æ˜¯æ¥å£ï¼Œä½ å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªç±»ï¼Œè‡ªç„¶ä¹ŸåŒ…å«äº†è‰¯å¥½çš„é¢å‘å¯¹è±¡å’Œå¹¶å‘ç¼–ç¨‹çš„æ”¯æŒã€‚
- `final`çš„å€¼åªèƒ½è¢«è®¾å®šä¸€æ¬¡ã€‚`const`æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶çš„å¸¸é‡ï¼Œå¯ä»¥é€šè¿‡`const`æ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œ`var n = const[]`,è¿™é‡Œnè¿˜æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåªæ˜¯è¢«èµ‹å€¼äº†ä¸€ä¸ªå¸¸é‡å€¼ï¼Œå®ƒè¿˜æ˜¯å¯ä»¥ç¬¦å…¶ä»–å€¼ã€‚å®ä¾‹å˜é‡å¯ä»¥æ˜¯final,ä½†ä¸èƒ½æ˜¯constã€‚
- Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä½†å¯ä»¥ç”¨`var`æˆ–è€…`dynamic`æ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼ŒDartä¼šè‡ªåŠ¨æ¨æ–­å…¶æ•°æ®ç±»å‹ï¼Œ`dynamic`ç±»ä¼¼C#
- ä½¿ç”¨é™æ€ç±»å‹å¯ä»¥æ›´æ¸…æ™°è¡¨é¢ä½ çš„æ„å›¾ï¼Œå¹¶ä¸”å¯ä»¥è®©é™æ€åˆ†æå·¥å…·æ¥åˆ†æä½ çš„ä»£ç ã€‚
- Dartåœ¨è¿è¡Œä¹‹å‰ä¼šå…ˆè§£æä½ çš„ä»£ç ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ç±»å‹æˆ–è€…ç¼–è¯‘æ—¶å¸¸é‡æ¥å¸®åŠ©Dartå»æ•è·å¼‚å¸¸ä»¥åŠè®©ä»£ç è¿è¡Œçš„æ›´é«˜æ•ˆã€‚
- Dartå·¥å…·å¯ä»¥æŒ‡å‡ºä¸¤ç§é—®é¢˜ï¼šè­¦å‘Šå’Œé”™è¯¯ã€‚è­¦å‘Šåªæ˜¯è¯´ä½ çš„ä»£ç å¯èƒ½æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸ä¼šé˜»æ­¢ä½ çš„ä»£ç æ‰§è¡Œã€‚é”™è¯¯å¯ä»¥æ˜¯ç¼–è¯‘æ—¶é”™è¯¯ä¹Ÿå¯ä»¥æ˜¯è¿è¡Œæ—¶é”™è¯¯ã€‚é‡åˆ°ç¼–è¯‘æ—¶é”™æ—¶ï¼Œä»£ç å°†æ— æ³•æ‰§è¡Œï¼›è¿è¡Œæ—¶é”™è¯¯å°†ä¼šåœ¨è¿è¡Œä»£ç çš„æ—¶å€™å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸ã€‚

## Dartè¯­æ³•

### 1.å…³é”®å­—

ä¸‹è¡¨æ˜¯Dartè¯­è¨€çš„å…³é”®å­—

|  const   |   null   |   class    |   new    |  this   |
| :------: | :------: | :--------: | :------: | :-----: |
|    as    | default  |   final    | continue |  throw  |
|  assert  | deferred |  finally   | operator |  true   |
|  async   |    do    |    for     |   part   |   try   |
|  async*  | dynamic  |    get     | rethrow  | typedef |
|  await   |   else   |     if     |  return  |   var   |
|  break   |   enum   | implements |   set    |  void   |
|   case   |  export  |   import   |  static  |  while  |
|  catch   | external |     in     |  super   |  with   |
|  false   | extends  |     is     |  switch  |  yield  |
| abstract | factory  |  library   |  sync*   | yield*  |

### 2.ä¸€ä¸ªæœ€åŸºæœ¬çš„Dartç¨‹åº

```
//å®šä¹‰æ‰“å°æ•°å­—æ–¹æ³•
printNumber(num Number){
  print('The number is $Number');
}

//æ‰§è¡Œç¨‹åºå…¥å£
void main(){
  //å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  var number = 6.76;
  //è°ƒç”¨æ‰“å°æ•°å­—æ–¹æ³•
  printNumber(number);
}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•åŸºæœ¬çš„`Dart`ç¨‹åºï¼Œè™½ç„¶ç®€å•ä½†æ˜¯ç”¨åˆ°äº†`Dart`å¾ˆå¤šç‰¹æ€§ï¼š

- `//`è¿™æ˜¯æ³¨é‡Šç¬¦å·ï¼Œè¿˜å¯ä»¥ç”¨`/*...*/`è¿™æ˜¯å¾ˆå¤šè¯­è¨€çš„æ³¨é‡Šç¬¦å·
- `num`è¿™æ˜¯æ•°å€¼å‹ï¼Œ`String`ï¼Œ`int`ï¼Œ`bool`æ˜¯å¦å¤–å…¶ä»–å‡ ç§ç±»å‹ã€‚æ³¨æ„ï¼šæ•°å€¼å‹`num`åŒ…å«æ•´å½¢`int`å’Œæµ®ç‚¹å‹`double`ã€‚
- 6.76æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ï¼Œæ•°å­—å¸¸é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚
- `print()`æ‰“å°å†…å®¹çš„æ–¹æ³•
- `"..."`æˆ–è€…æ˜¯`'...'`è¡¨ç¤ºå­—ç¬¦ä¸²å¸¸é‡
- `$variableName`æˆ–è€…æ˜¯`${expression}`æ˜¯å­—ç¬¦ä¸²æ’å€¼ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡ä¸­å¼•ç”¨å˜é‡æˆ–è€…è¡¨è¾¾å¼
- `var`ä¸€ç§ä¸æŒ‡å®šç±»å‹å£°æ˜å˜é‡çš„æ–¹å¼
- `main()`æ˜¯Dartç¨‹åºçš„å…¥å£æ–¹æ³•ï¼Œæ¯ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªè¿™æ ·å¾—åˆ†æ–¹æ³•

### 3.Variableså˜é‡

`var name = 'knight';` ä¸Šé¢æ˜¯å£°æ˜å˜é‡å¹¶èµ‹å€¼çš„ç¤ºä¾‹ï¼Œå˜é‡æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä¸Šé¢çš„åå­—ä¸º`name`çš„å˜é‡å¼•ç”¨ä¸€ä¸ªå†…å®¹ä¸º`"knight"`çš„Stringå¯¹è±¡ã€‚

### 4.Default value(é»˜è®¤å€¼)

æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡è‡ªåŠ¨è·å–ä¸€ä¸ªé»˜è®¤å€¼ä¸º`null`ã€‚ç±»å‹ä¸ºæ•°å­—çš„å˜é‡å¦‚æœæ²¡æœ‰åˆå§‹åŒ–é‚£ä¹ˆé»˜è®¤çš„å€¼ä¹Ÿæ˜¯`null`ï¼Œå› ä¸ºæ•°å­—ç±»å‹ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¸Šé¢ç›´æ¥ä¸Šä»£ç ï¼š

```
//å®šä¹‰æ‰“å°æ•°å­—æ–¹æ³•
printNumber(num Number){
  print("The number is $Number");
}

//æ‰§è¡Œç¨‹åºå…¥å£
void main(){
  //å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  var number;

  //è°ƒç”¨æ‰“å°æ•°å­—æ–¹æ³•
  printNumber(number);
}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢æ‰“å°çš„ç»“æœæ˜¯`The number is null`ã€‚

### 5.Optional typesï¼ˆå¯é€‰çš„ç±»å‹ï¼‰

å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©åŠ ä¸Šå…·ä½“ç±»å‹,å¦‚ä¸‹é¢ï¼š

```
  //å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  double number = 6.666;
å¤åˆ¶ä»£ç 
```

æ·»åŠ ç±»å‹å¯ä»¥æ›´åŠ æ¸…æ™°è¡¨è¾¾ä½ çš„æ„å›¾ã€‚IDEç¼–è¯‘å™¨ç­‰å·¥å…·æœ‰å¯ä»¥ä½¿ç”¨ç±»å‹æ¥æ›´å¥½çš„å¸®åŠ©ï¼Œæä¾›æç¤ºä»£ç è¡¥å…¨ï¼Œæå‰å‘ç°bugç­‰åŠŸèƒ½ã€‚

### 6.Final and const

å¦‚æœä»¥åä¸æ‰“ç®—ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œä½¿ç”¨`final`æˆ–è€…`const`ã€‚ä¸€ä¸ª`final`å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼›ä¸€ä¸ª`const`å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚æ³¨æ„ï¼š`const`å˜é‡åŒæ—¶ä¹Ÿæ˜¯`final`å˜é‡ï¼Œå®ä¾‹å˜é‡å¯ä»¥ä¸º`final`ä½†ä¸èƒ½æ˜¯`const`ã€‚ç›´æ¥ä¸Šä¾‹å­ï¼š

```
//å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  final double number = 6.666;
  number = 6.667;
  //è°ƒç”¨æ‰“å°æ•°å­—æ–¹æ³•
  printNumber(number);
å¤åˆ¶ä»£ç 
```

ä¸Šé¢ä¾‹å­ç”¨`final`ä¿®é¥°`number`å¹¶èµ‹å€¼ï¼Œä½†`number = 6.67`çš„æ—¶å€™ï¼Œæƒ³é‡æ–°ç»™`number`å†èµ‹å€¼çš„æ—¶å€™ï¼Œç¼–è¯‘é”™æŠ¥é”™ï¼š`number,a final variable,can only be set once.`ï¼Œæ„æ€å’Œä¸Šé¢æ‰€è¯´çš„ä¸€æ ·å°±æ˜¯`final`å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼ä¸‹é¢æ”¹ä¸ºå®šä¹‰ä¸º`const`æ¥ä¿®é¥°`number`:

```
  //å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  const double number = 6.666;
  number = 6.667;
  //è°ƒç”¨æ‰“å°æ•°å­—æ–¹æ³•
  printNumber(number);
å¤åˆ¶ä»£ç 
```

åŒæ ·`number = 6.667`ç¼–è¯‘å™¨ä¼šæŠ¥é”™`Constant variables can not be assigned a value`æ„æ€æ˜¯å¸¸é‡å€¼ä¸èƒ½èµ‹å€¼ï¼Œä¸Šé¢ä¹Ÿè¯´äº†ï¼Œå› ä¸º`const`å˜é‡åŒæ—¶ä¹Ÿæ˜¯`final`å˜é‡ã€‚å¦‚æœ`const`å˜é‡åœ¨ç±»ä¸­ï¼Œè¯·å®šä¹‰ä¸º`static const`ã€‚å¯ä»¥ç›´æ¥å®šä¹‰`const`å’Œæ——åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ª`const`å˜é‡ä½¿ç”¨å…¶ä»–`const`å˜é‡çš„å€¼æ¥åˆå§‹åŒ–å…¶å€¼ï¼Œå¦‚ä¸‹é¢ï¼š

```
  //å®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªå˜é‡
  const double number = 6.66;
  const double number1 = 2 * number;
å¤åˆ¶ä»£ç 
```

ä¸Šé¢ä¾‹å­çš„`number1`å°±æ˜¯ç”¨äº†`number`æ¥å°†è‡ªå·±åˆå§‹åŒ–å€¼ï¼Œ`const`å…³é”®å­—ä¸ä»…ä»…åªç”¨æ¥å®šä¹‰å¸¸é‡ã€‚æœ‰å¯ä»¥ç”¨æ¥åˆ›å»ºä¸å˜çš„å€¼ï¼Œè¿˜èƒ½å®šä¹‰æ„é€ å‡½æ•°ä¸º`const`ç±»å‹ ï¼Œè¿™ä¸­ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œä»»ä½•å˜é‡éƒ½å¯ä»¥æœ‰ä¸€ä¸ªä¸å˜çš„å€¼ã€‚

### 7.Built-in types(å†…ç½®çš„ç±»å‹)

åœ¨Dartæœ‰å‡ ç§å†…ç½®çš„æ•°æ®ç±»å‹ï¼šæ•°å€¼å‹-Numberã€å¸ƒå°”å‹-booleanã€é”®å€¼å¯¹-Mapã€å­—ç¬¦ä¸²-Stringã€åˆ—è¡¨-Listã€å…¶ä»–ç±»å‹-Runesã€Symbols

#### 7.1æ•°å€¼å‹-Number

Dartä¸­æä¾›äº†ä¸¤ç§ç±»å‹ï¼š



![æ•°å€¼ç±»å‹](https://user-gold-cdn.xitu.io/2019/1/27/1688ea8376b5ebdb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){


  //æ•´å½¢ï¼Œå…¶å–å€¼é€šå¸¸ä½äº-2çš„53æ¬¡æ–¹åˆ°2çš„53ä¹‹é—´ã€‚
  num x = 777;
  //æµ®ç‚¹æ•° 64ä½
  x = 777.7;

  int y = 777;
  y = 777.7;       //è¿™ä¸€è¡Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºå°†intå‹çš„æ•°æ®è½¬ä¸ºdoubleå‹

  double n = 77,7;
  d = 77;          //è¿™ä¸ªåœ°æ–¹ä¼šæŠ¥é”™ï¼Œå› ä¸ºå°†doubleå‹çš„æ•°æ®è½¬ä¸ºintå‹

  int x1 = 7;
  int x2 = 77;
  int x3 = 777;
  int x4 = 7777;

  print('${x1.bitLength}'); //å äº†3ä¸ªbit ç›¸å½“äº00000000 00000111
  print('${x2.bitLength}'); //å äº†7ä¸ªbit ç›¸å½“äº00000000 01001101
  print('${x3.bitLength}'); //å äº†10ä¸ªbit ç›¸å½“äº00000011 00001001
  print('${x4.bitLength}'); //å äº†13ä¸ªbit ç›¸å½“äº00011110 01100001


}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªç‚¹ï¼š

- ä½¿ç”¨`num`å£°æ˜çš„å˜é‡ï¼Œå¯ä»¥éšæ„çš„è½¬æ¢ç±»å‹ï¼Œå¦‚æœä½¿ç”¨`int`æˆ–è€…`double`æ˜ç¡®çš„å£°æ˜,é‚£å°±ä¸èƒ½è½¬æ¢äº†
- åˆ¤æ–­ä¸€ä¸ª`int`å€¼éœ€è¦å¤šå°‘ä½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`bitLength`

### 8.æ•°å€¼å‹çš„æ“ä½œ

è¿ç®—ç¬¦ï¼š+ã€-ã€*ã€/ã€~/ã€% å¸¸ç”¨å±æ€§ï¼šisNaNã€isEvenã€isOdd å¸¸ç”¨æ–¹æ³•ï¼šabs()ã€round()ã€floor()ã€ceil()ã€toInt()ã€toDouble()

```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){


  int i =7;
  double d = 10.1;

  print(i / d);               //0.6930693069306931
  print(i ~/ d);              //0   è¿™ä¸ªæ“ä½œæ˜¯å–æ•´ å°±æ˜¯å¾—å‡ºå•†

  print(i.isOdd);             // åˆ¤æ–­æ˜¯å¥‡æ•°
  print(i.isEven);            // åˆ¤æ–­æ˜¯å¶æ•°


  //String -> int
  var x1 = int.parse("7");
  print(x1 == 7);              //è¾“å‡ºtrue

  //Sting -> double
  var x2 = double.parse("7.7");
  print(x2 == 7.7);             //è¾“å‡ºtrue

  //int -> String
  var x3 = 7.toString();
  print(x3 == '7');             //è¾“å‡ºtrue

  //double -> String
  var x4 = 7.1234.toStringAsFixed(2);
  print(x4 == '7.12');          //è¾“å‡ºtrue

  //æ±‚ç»å¯¹å€¼
  var x5 = (-7).abs();
  print(x5 == 7);

  //å››èˆäº”å…¥1
  var x6 = (7.7).round();
  print(x6);                   //è¾“å‡º8

  //å››èˆäº”å…¥2
  var x7 = (7.3).round();
  print(x7);                   //è¾“å‡º7

  //æ±‚å°äºå®ƒçš„æœ€å¤§æ•´æ•°
  var x8 = (7.7).floor();
  print(x8);                   //è¾“å‡º7

  //æ±‚å¤§äºå®ƒçš„æœ€å°æ•´æ•°
  var x9 = (7.7).ceil();
  print(x9);                   //è¾“å‡º8

  double num1 = 7.77;
  print(num1);                //ç»“æœæ˜¯7.77
  double num2 = 7;
  print(num2);                //ç»“æœæ˜¯7.0
  int num3 = 7;
  print(num3.toDouble());     //int è½¬ double ç»“æœæ˜¯7.0
  double num4 = 7.77;
  print(num4.toInt());        //double è½¬ int ç»“æœæ˜¯7
  
}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢åˆ—å‡ºäº†ä¸€äº›å¹³æ—¶é‡åˆ°æœ€å¤šçš„æ“ä½œï¼Œå¦‚æ±‚ä½™ï¼Œæ±‚æ•´ï¼Œç±»å‹è½¬æ¢ç­‰ã€‚

### 9.Strings(å­—ç¬¦ä¸²)

Dartå­—ç¬¦ä¸²æ˜¯UTF-16ç¼–ç çš„å­—ç¬¦åºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼š

```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){

  String m_str1 = 'å•å¼•å·å­—ç¬¦ä¸²';
  String m_str2 = "åŒå¼•å·å­—ç¬¦ä¸²";

  print(m_str1);        //è¾“å‡ºï¼šå•å¼•å·å­—ç¬¦ä¸²
  print(m_str2);        //è¾“å‡ºï¼šåŒå¼•å·å­—ç¬¦ä¸²

}
å¤åˆ¶ä»£ç 
```

Stringä¸­å•ã€åŒå¼•å·äº’ç›¸åµŒå¥—æƒ…å†µ

```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){

  String m_str1 = 'å•å¼•å·ä¸­çš„"åŒå¼•å·"å­—ç¬¦ä¸²';
  String m_str2 = "åŒå¼•å·ä¸­çš„'å•å¼•å·'å­—ç¬¦ä¸²";

  print(m_str1);        //è¾“å‡ºï¼šå•å¼•å·ä¸­çš„"åŒå¼•å·"å­—ç¬¦ä¸²
  print(m_str2);        //è¾“å‡ºï¼šåŒå¼•å·ä¸­çš„'å•å¼•å·'å­—ç¬¦ä¸²

  //å•å¼•å·é‡Œé¢æœ‰å•å¼•å·ï¼Œå¿…é¡»åœ¨å‰é¢åŠ åæ–œæ 
  String m_str3 = 'å•å¼•å·ä¸­çš„\'å•å¼•å·\'';
  String m_str4 = "åŒå¼•å·é‡Œé¢æœ‰åŒå¼•å·,\"åŒå¼•å·\"";
  print(m_str3);        //è¾“å‡ºï¼šå•å¼•å·ä¸­çš„'å•å¼•å·'
  print(m_str4);        //è¾“å‡ºï¼šåŒå¼•å·é‡Œé¢æœ‰åŒå¼•å·,"åŒå¼•å·"

}
å¤åˆ¶ä»£ç 
```

å•å¼•å·åµŒå¥—å•å¼•å·ä¹‹é—´ä¸å…è®¸å‡ºç°ç©ºä¸²ï¼ˆä¸æ˜¯ç©ºæ ¼ï¼‰ï¼ŒåŒå¼•å·åµŒå¥—åŒå¼•å·ä¹‹é—´ä¸å…è®¸å‡ºç°ç©ºä¸²ï¼š

```
 //String m_str5 = 'å•å¼•å·''''å•å¼•å·'; //æŠ¥é”™
  String m_str6 = 'å•å¼•å·'' ''å•å¼•å·';
  print(m_str6);        //è¾“å‡ºï¼š å•å¼•å· å•å¼•å·

  String m_str7 = 'å•å¼•å·''*''å•å¼•å·';
  print(m_str7);        //è¾“å‡ºï¼š å•å¼•å·*å•å¼•å·

  //String m_str8 = "åŒå¼•å·""""åŒå¼•å·"ï¼›   //æŠ¥é”™

  String m_str9 = "åŒå¼•å·"" ""åŒå¼•å·";
  print(m_str9);        //è¾“å‡ºï¼š åŒå¼•å· åŒå¼•å·

  String m_str10 = "åŒå¼•å·""*""åŒå¼•å·";
  print(m_str10);       //è¾“å‡ºï¼š åŒå¼•å·*åŒå¼•å·
å¤åˆ¶ä»£ç 
```

å•åŒå¼•å·æ··åˆåµŒå¥—ç©ºä¸²æ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹ï¼š

```
 String m_str11 = 'å•å¼•å·""""å•å¼•å·';
  print(m_str11);       //è¾“å‡ºï¼š å•å¼•å·""""å•å¼•å·

  String m_str12 = 'å•å¼•å·"" ""å•å¼•å·';
  print(m_str12);       //è¾“å‡ºï¼š å•å¼•å·"" ""å•å¼•å·

  String m_str13 = 'å•å¼•å·""*"""å•å¼•å·';
  print(m_str13);       //è¾“å‡ºï¼š å•å¼•å·""*"""å•å¼•å·

  String m_str14 = "åŒå¼•å·''''åŒå¼•å·";
  print(m_str14);       //è¾“å‡º:  åŒå¼•å·''''åŒå¼•å·

  String m_str15 = "åŒå¼•å·'' ''åŒå¼•å·";
  print(m_str15);       //è¾“å‡ºï¼š  åŒå¼•å·'' ''åŒå¼•å·

  String m_str16 = "åŒå¼•å·''*''åŒå¼•å·";
  print(m_str16);       //è¾“å‡ºï¼š  åŒå¼•å·''*''åŒå¼•å·
å¤åˆ¶ä»£ç 
```

å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š

```
//ä½¿ç”¨ç©ºæ ¼æ‹¼æ¥ï¼Œå¤šä¸ªç©ºæ ¼ä¹Ÿæ˜¯å¯ä»¥åœ°
  String m_str1 = 'å•å¼•å·å­—ç¬¦ä¸²' 'æ‹¼æ¥'     '---';
  print(m_str1);       //è¾“å‡ºï¼šå•å¼•å·å­—ç¬¦ä¸²æ‹¼æ¥---

  //ä½¿ç”¨æ¢è¡Œç¬¦å’Œç©ºæ ¼
  String m_str2 = 'å•å¼•å·å­—ç¬¦ä¸²'
    'æ¢è¡Œ''åŠ ç©ºæ ¼' '';
  print(m_str2);       //è¾“å‡ºï¼š å•å¼•å·å­—ç¬¦ä¸²æ¢è¡ŒåŠ ç©ºæ ¼

  //å•åŒå¼•å· ç©ºæ ¼æ‹¼æ¥
  String m_str3 = "å•åŒå¼•å·å­—ç¬¦ä¸²åŠ ç©ºæ ¼" 'æ‹¼æ¥'      "----";
  print(m_str3);      //è¾“å‡ºï¼š åŒå¼•å·å­—ç¬¦ä¸²åŠ ç©ºæ ¼æ‹¼æ¥----

  //å•åŒå¼•å· æ¢è¡Œ ç©ºæ ¼
  String m_str4 = "å•åŒå¼•å·å­—ç¬¦ä¸²"
    'æ¢è¡Œ' 'åŠ ç©ºæ ¼' '***';
  print(m_str4);      //è¾“å‡ºï¼š å•åŒå¼•å·å­—ç¬¦ä¸²æ¢è¡ŒåŠ ç©ºæ ¼***

  //ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²
  String m_str5 = '''
     ä¸‰ä¸ªå•å¼•å·+
     æ‹¼æ¥
     ''';
  print(m_str5);      /*è¾“å‡º    ä¸‰ä¸ªå•å¼•å·+
                                æ‹¼æ¥
                                */

  //ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å·åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²
  String m_str6 = """
    ä¸‰ä¸ªåŒå¼•å·+
    æ‹¼æ¥
    """;
  print(m_str6);      /*è¾“å‡º    ä¸‰ä¸ªåŒå¼•å·+
                                æ‹¼æ¥
                                */

  String m_str7 = "æ­£å¸¸æ‹¼æ¥"+",ç”¨åŠ å·äº†æ¥æ‹¼æ¥";
  print(m_str7);      //è¾“å‡ºï¼š æ­£å¸¸æ‹¼æ¥,ç”¨åŠ å·äº†æ¥æ‹¼æ¥
å¤åˆ¶ä»£ç 
```

é€šè¿‡æä¾›ä¸€ä¸ª`r`å‰ç¼€å¯ä»¥åˆ›å»º"åŸå§‹raw"å­—ç¬¦ä¸²ï¼Œåœ¨å­—ç¬¦ä¸²åŠ å­—ç¬¦ï¼Œæˆ–è€…åœ¨`\`å‰é¢å†åŠ ä¸€ä¸ª`\`ï¼Œå¯ä»¥é¿å…`\`çš„è½¬ä¹‰ä½œç”¨ï¼Œå¦‚ä¸‹ï¼š

```
  String m_str1 = r"sdsdsds";
  print(m_str1);  //è¾“å‡º  sdsdsds

  print("æ¢è¡Œï¼š\n"); //è¾“å‡ºï¼šæ¢è¡Œ

  print(r"æ¢è¡Œï¼š\n"); //è¾“å‡ºï¼šæ¢è¡Œï¼š\n

  print("æ¢è¡Œï¼š\\n"); //è¾“å‡ºï¼šæ¢è¡Œï¼š\n
å¤åˆ¶ä»£ç 
```

`${è¡¨è¾¾å¼çš„ä½¿ç”¨}`ï¼Œç±»ä¼¼JSä¸­ES6çš„è¡¨è¾¾å¼ä½¿ç”¨ï¼Œä½¿ç”¨`$`å¯ä»¥è·å–å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œç”¨`${è¡¨è¾¾å¼}`å¯ä»¥å°†è¡¨è¾¾å¼çš„å€¼æ”¾å…¥å­—ç¬¦ä¸²ä¸­ï¼Œä½¿ç”¨`${è¡¨è¾¾å¼}`ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ä¸‹é¢ä¹Ÿæ˜¯ç›´æ¥ä¸Šä¾‹å­ï¼š

```
bool flag = true;
  String m_str1 = "å­—ç¬¦ä¸²";
  print("çœ‹çœ‹è¿™ä¸ªå€¼ï¼š${m_str1} ""çœ‹çœ‹è¿™ä¸ªå€¼flagï¼š${flag}"); //è¾“å‡ºï¼šå­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸² çœ‹çœ‹è¿™ä¸ªå€¼flagï¼štrue

  //ä½¿ç”¨$+å­—ç¬¦ä¸²
  String name = "knight";
  print("$name" + "CTO");     //è¾“å‡ºï¼šknightCTOï¼›

  //ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè¿ç”¨äº†Stringç±»ä¸­çš„toUpperCaseå‡½æ•°ï¼ŒæŠŠå­—æ¯å˜æˆå¤§å†™ 
  String m_str = "Android";
  assert('${m_str.toUpperCase()} is very good' ==       
        'ANDROID is very good');
  
å¤åˆ¶ä»£ç 
```

==æ“ä½œç¬¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ä¸€æ ·ï¼Œå¦‚æœäº†ï¼›ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ä¸€æ ·çš„å­—ç¬¦ç¼–ç åºåˆ—ï¼Œåˆ™ä»–ä»¬æ˜¯ç›¸ç­‰çš„ã€‚åœ¨ç”Ÿäº§æ¨¡å¼ `assert()` è¯­å¥è¢«å¿½ç•¥äº†ã€‚åœ¨æ£€æŸ¥æ¨¡å¼`assert(condition)` ä¼šæ‰§è¡Œï¼Œå¦‚æœæ¡ä»¶ä¸ä¸º true åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

### 10.Booleanï¼ˆå¸ƒå°”å€¼ï¼‰

Dartä¸­ä»¥`bool`ä»£è¡¨å¸ƒå°”å€¼ï¼Œåªæœ‰ä¸¤ä¸ªå¯¹è±¡æ˜¯å¸ƒå°”ç±»å‹çš„ï¼Œé‚£å°±æ˜¯`true`å’Œ`false`æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚å½“Dartéœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåªæœ‰`true`å¯¹è±¡æ‰è¢«è®¤ä¸ºæ˜¯trueï¼Œæ‰€æœ‰å…¶ä»–å€¼éƒ½æ˜¯falseã€‚çœ‹ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š

```
  String name ="knight";
  //æŠ¥é”™ å› ä¸ºnameä¸æ˜¯boolç±»å‹
  if(name){
    print(name);

  }
å¤åˆ¶ä»£ç 
```

ä¸Šé¢ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæç¤º`name`ä¸æ˜¯å¸ƒå°”å€¼ï¼ŒDartä½¿ç”¨çš„æ˜¯å…ˆå¼çš„æ£€æŸ¥å€¼ï¼Œå¦‚ä¸‹å›¾ï¼š

```
  // æ£€æŸ¥æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²
  var fullName = '';
  assert(fullName.isEmpty);

  // æ£€æŸ¥æ˜¯å¦å°äºç­‰äº0
  var hitPoints = 0;
  assert(hitPoints <= 0);

  // æ£€æŸ¥æ˜¯å¦ä¸º null.
  var unicorn;
  assert(unicorn == null);

  // æ£€æŸ¥æ˜¯å¦ä¸º NaN.
  var iMeantToDoThis = 0 / 0;
  assert(iMeantToDoThis.isNaN);
å¤åˆ¶ä»£ç 
```

`assert`æ˜¯è¯­è¨€å†…ç½®çš„æ–­è¨€çš„å‡½æ•°ï¼Œä»…åœ¨æ£€æŸ¥æ¨¡å¼æœ‰æ•ˆï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé™¤éæ¡ä»¶ä¸ºçœŸï¼Œå¦åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚ï¼ˆæ–­è¨€å¤±è´¥åˆ™ç¨‹åºç«‹åˆ»ç»ˆæ­¢ï¼‰

### 11.Listsåˆ—è¡¨

`array`æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆç±»å‹ï¼Œæˆ‘ç›¸ä¿¡èº«ä¸ºå¼€å‘è€…ï¼Œéƒ½ç”¨è¿‡ã€‚åœ¨`Dart`ä¸­æ•°ç»„å°±æ˜¯`List`å¯¹è±¡ï¼Œæ‰€ä»¥ä¸€èˆ¬ç§°ä¸º`lists`,ä¸‹é¢ç›´æ¥ä¸ŠDart listçš„ç¤ºä¾‹ï¼š

```
//åˆ›å»ºä¸€ä¸ªintç±»å‹çš„list å¹¶èµ‹å€¼ä¸º0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4
  List list =  [0,1,2,3,4];

  //ä½¿ç”¨æ„å»ºçš„æ–¹å¼åˆ›å»ºlist
  List list1 = new List();

  //åˆ›å»ºä¸€ä¸ªå¸¸é‡çš„Listï¼Œä¸å¯ä»¥æ”¹å˜çš„List
  List list2 = const[0,1,2,3];

  //å¢åŠ æ³›å‹
  List list3 = new List<String>();

  //åˆ›å»ºå›ºå®šçš„é•¿åº¦çš„æ•°ç»„åˆ—è¡¨ï¼Œä¸èƒ½ç§»é™¤æˆ–è€…å¢åŠ 
  List list4 = new List(5);

  //åˆ›å»ºåŒ…å«æ‰€æœ‰ä»¥ä¸‹å…ƒç´ çš„å¯æ”¹å˜çš„é•¿åº¦åˆ—è¡¨
  List list5 = new List.from([0,1,2,3]);

  //åˆ›å»ºåœ¨å›ºå®šèŒƒå›´å†…æ”¹å˜é•¿åº¦çš„åˆ—è¡¨
  List list6 = new List()..length = 10;

  //åˆ›å»ºåŒ…å«æ‰€æœ‰å…ƒç´ çš„å›ºå®šé•¿åº¦åˆ—è¡¨
  List list7 = new List.unmodifiable([0,1,2]);

  //ç”¨ç”Ÿæˆå™¨ç»™æ‰€æœ‰å…ƒç´ èµ‹åˆå§‹å€¼
  List list8 = new List<int>.generate(5, (int i){
    return i + i;

  });

å¤åˆ¶ä»£ç 
```

Listå¸¸ç”¨çš„ä¸€äº›apiï¼š

```
 //åœ¨åˆ—è¡¨ä¸­å­˜æ”¾ä¸åŒç±»å‹çš„å¯¹è±¡
  List list = [1,2,3,false,"Kinght"];
  print(list);          //è¾“å‡ºï¼š[1, 2, 3, false, Kinght]

  //åœ¨åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ 
  list.add(7);
  print(list);          //è¾“å‡ºï¼š[1, 2, 3, false, Kinght, 7]

  //ä¿®æ”¹åˆ—è¡¨ä¸‹æ ‡ä¸º1çš„å€¼
  list[1] = "paul";
  print(list);          //è¾“å‡ºï¼š[1, paul, 3, false, Kinght, 7]

  //ç§»é™¤åˆ—è¡¨çš„æŒ‡å®šå€¼å¾—çš„å…ƒç´ 
  list.remove("paul");
  print(list);          //è¾“å‡ºï¼š[1, 3, false, Kinght, 7]

  //ç§»é™¤åˆ—è¡¨æŒ‡å®šä¸‹æ ‡ä¸‹çš„å…ƒç´ 
  list.removeAt(0);
  print(list);          //è¾“å‡ºï¼š[3, false, Kinght, 7]

  //è·å–åˆ—è¡¨çš„é•¿åº¦
  print(list.length);   //è¾“å‡ºï¼š4

  //å‘åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  åœ¨ç¬¬0çš„ä½ç½®ä¸Šæ’å…¥Android
  list.insert(0, "Android");
  print(list);          //è¾“å‡ºï¼š[Android, 3, false, Kinght, 7]

  //åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰æŸå…ƒç´ 
  print(list.indexOf("Android")); //è¿™é‡Œå­˜åœ¨ï¼Œè¾“å‡ºå¯¹åº”çš„ä¸‹æ ‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¾“å‡º-1

  //æ’åº
  List list1 = [3,1,2,6,7];
  // æ ¹æ®è¯­æ³•æç¤ºï¼š List.sort([(int, int) â†’ int compare]) â†’ void
  list1.sort((a,b) => a.compareTo(b));
  print(list1);           //è¾“å‡ºï¼š[1, 2, 3, 6, 7]
å¤åˆ¶ä»£ç 
```

ç®€å•æ€»ç»“ï¼š

1. ä¸‹æ ‡ç´¢å¼•ä»0å¼€å§‹ã€‚
2. å¯ä»¥ç›´æ¥æ‰“å°Listçš„å…ƒç´ ï¼ŒListä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

### 12.Maps

é€šå¸¸æ¥è®²ï¼ŒMapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ç›¸å…³çš„å¯¹è±¡ï¼Œé”®å’Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚æ¯ä¸ªé”®åªå‡ºç°ä¸€æ¬¡ï¼Œè€Œä¸€ä¸ªå€¼åˆ™å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚ä¸Šé¢ç›´æ¥ä¸ŠMapé›†åˆçš„åˆ›å»ºæ–¹å¼ï¼š

```
  //1.é€šè¿‡æ„å»ºå™¨æ¥åˆ›å»ºMap
  Map map1 = new Map();
  //æ·»åŠ å€¼ èµ‹å€¼
  map1["one"] = 'Android';
  map1["two"] = 'IOS';
  map1["three"] = 'Flutter';
  print(map1);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: Flutter}

  //2.é€šè¿‡å¤åˆ¶çš„å½¢å¼
  Map map2 = Map.of(map1);
  print(map2);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: Flutter}

  //3.è·Ÿä¸Šé¢å½¢å¼ä¸€æ ·  Object.fromEntries() å‡½æ•°ä¼ å…¥ä¸€ä¸ªé”®å€¼å¯¹çš„åˆ—è¡¨ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸¦æœ‰è¿™äº›é”®å€¼å¯¹çš„æ–°å¯¹è±¡ã€‚
  // è¿™ä¸ªè¿­ä»£å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®ç°@iteratoræ–¹æ³•çš„çš„å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚å®ƒ
  // ç”Ÿæˆä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå…ƒç´ çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å°†ç”¨ä½œå±æ€§é”®çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ä¸è¯¥å±æ€§é”®å…³è”çš„å€¼ã€‚
  Map map3 = Map.fromEntries(map1.entries);
  print(map3);

  //4.ç›´æ¥å£°æ˜ï¼Œç›´æ¥èµ‹å€¼keyä¸ºStringç±»å‹çš„map
  Map map4 = {'one':'Android',
    'two':'IOS',
    'three':'Flutter'};
  print(map4);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: Flutter}

  //5.åˆ›å»ºä¸€ä¸ªç©ºçš„Map
  Map map5 = Map.identity();
  print(map5);              //è¾“å‡ºï¼š{}


  //6.åˆ›å»ºä¸å¯å˜çš„Map
  Map map6 = const {'one':'Android','two':'IOS','three':'flutter'};
  print(map6);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: flutter}

  //7.åœ¨ç›®æ ‡çš„map6åˆ›å»º(å¤åˆ¶)æ–°çš„ä¸å¯ä¿®æ”¹map7
  Map map7 = Map.unmodifiable(map6);
  print(map7);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: flutter}

  //8.åˆ›å»ºkeyä¸ºintå€¼å¾—map
  Map map8 = {1:'Android',
    2:'IOS',
    3:'Flutter'};
  print(map8);              //è¾“å‡ºï¼š{1: Android, 2: IOS, 3: Flutter}

  //9.æ ¹æ®listæ‰€æä¾›çš„key valueæ¥åˆ›å»ºmap
  List<String> keys = ['one','two'];
  List<String> values = ['Android','IOS'];
  Map map9 = Map.fromIterables(keys, values);
  print(map9);               //è¾“å‡ºï¼š{one: Android, two: IOS}
  
   //é€šè¿‡æ„å»ºå™¨æ¥åˆ›å»ºMap
   Map map10 = new Map();
   //æ·»åŠ å€¼ èµ‹å€¼ èµ‹å€¼ä¸åŒç±»å‹çš„Map
   map10["one"] = 'Android';
   map10["two"] = 'IOS';
   map10["three"] = 'Flutter';
   map10[4] = 'RN';
   print(map10);              //è¾“å‡ºï¼š{one: Android, two: IOS, three: Flutter, 4: RN}
å¤åˆ¶ä»£ç 
```

Mapå¸¸ç”¨çš„ä¸€äº›apiï¼š

```
 //åˆ›å»ºMap keyæ˜¯intç±»å‹ï¼Œvalueæ˜¯Stringç±»å‹
   var  map1 = new Map<int,String>();

   //å¯¹Mapç¬¬ä¸€ä¸ªä½ç½®èµ‹å€¼ï¼Œä¸­æ‹¬å·æ˜¯key
   map1[0] = 'Android';
   //å¯¹Mapç¬¬äºŒä¸ªä½ç½®èµ‹å€¼
   map1[1] = 'IOS';
   //å¯¹Mapç¬¬ä¸‰ä¸ªå€¼èµ‹å€¼
   map1[2] = 'flutter';
   //å¯¹Mapèµ‹ç©ºå€¼
   map1[3] = null;
   //å› ä¸ºMapä¸­çš„é”®å€¼æ˜¯å”¯ä¸€çš„ï¼Œå½“ç¬¬äºŒæ¬¡è¾“å…¥çš„keyå¦‚æœå­˜åœ¨ï¼ŒValueä¼šè¦†ç›–ä¹‹å‰
   map1[2] = 'RN';
   print(map1);                //{0: Android, 1: IOS, 2: RN, 3: null}

   //è·å–Mapçš„é•¿åº¦
   print(map1.length);         //è¾“å‡ºï¼š4

   //åˆ¤æ–­Mapæ˜¯å¦ä¸ºç©º
   print(map1.isNotEmpty);     //è¾“å‡ºç»“æœï¼štrue

   //åˆ¤æ–­Mapæ˜¯å¦ä¸ä¸ºç©º
   print(map1.isEmpty);        //è¾“å‡ºç»“æœï¼šfalse

   //æ£€ç´¢Mapæ˜¯å¦å«æœ‰æŸä¸ªKey
   print(map1.containsKey(1)); //è¾“å‡ºï¼štrue

   //æ£€ç´¢Mapæ˜¯å¦åŒ…å«æŸä¸ªValue
   print(map1.containsValue('Android'));  //è¾“å‡ºï¼štrue

   //åˆ é™¤æŸä¸ªé”®å€¼å¯¹
   map1.remove(0);
   print(map1);                //è¾“å‡ºï¼š{1: IOS, 2: RN, 3: null}

   //è·å–æ‰€æœ‰çš„key
   print(map1.keys);           //è¾“å‡ºï¼š(1, 2, 3)

   //è·å–æ‰€æœ‰çš„values
   print(map1.values);         //è¾“å‡ºï¼š(IOS, RN, null)

   //å¾ªç¯æ‰“å°
   /*
     key:1, value:IOS
     key:2, value:RN
     key:3, value:null

    */
     map1.forEach((key,value) {
     print("key:${key}, value:${value}");
   });

å¤åˆ¶ä»£ç 
```

ç®€å•æ€»ç»“ï¼š

1. å½“Mapçš„Keyæ²¡æœ‰æŒ‡å®šç±»å‹æ—¶ï¼ŒKeyç±»å‹ä¸ä¸€è‡´ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚
2. Mapé‡Œé¢çš„keyä¸èƒ½ç›¸åŒã€‚ä½†æ˜¯valueå¯ä»¥ç›¸åŒ,valueå¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²æˆ–è€…ä¸ºnullã€‚
3. åˆ›å»ºMapæœ‰ä¸¤ç§æ–¹å¼ï¼šé€šè¿‡æ„é€ å™¨(new)å’Œç›´æ¥èµ‹å€¼ã€‚

### 13.Runes

åœ¨Dartä¸­ï¼Œrunesä»£è¡¨å­—ç¬¦ä¸²çš„UTF-32 code pointsã€‚Unicodeä¸ºæ¯ä¸€ä¸ªå­—ç¬¦ã€æ ‡ç‚¹ç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰éƒ½å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¹Ÿå°±æ˜¯åœ¨ä¹¦å†™ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªå­—æ¯ï¼Œæ•°å­—éƒ½æ˜¯æœ‰å”¯ä¸€çš„æ•°å€¼ã€‚ç”±äºåœ¨Dartå­—ç¬¦ä¸²æ˜¯UTF-16 code unitså­—ç¬¦åºåˆ—ï¼Œæ‰€ä»¥åœ¨å­—ç¬¦ä¸²è¡¨è¾¾32-bit Unicodeå€¼å°±éœ€è¦æ–°çš„è¯­æ³•ï¼Œé€šå¸¸ç”¨`\uXXXX`çš„æ–¹å¼è¡¨ç¤ºUnicode code pointï¼Œè¿™é‡Œçš„XXXXæ˜¯4ä¸ª16è¿›åˆ¶çš„æ•°ã€‚å¦‚ï¼šå¿ƒå½¢ç¬¦å·ğŸ’—æ˜¯`\u2665`ã€‚å¯¹äºé4ä¸ªæ•°å€¼çš„æƒ…å†µï¼ŒæŠŠç¼–å·æ”¾åˆ°å¤§æ‹¬å·å³å¯ã€‚ä¾‹å¦‚ï¼Œç¬‘è„¸(ğŸ˜)æ˜¯`\u{1f600}`ã€‚`String`ç±»æœ‰ä¸€äº›å±æ€§å¯ä»¥æå–`rune`ä¿¡æ¯ã€‚`codeUnitAt`å’Œ`codeUnit`å±æ€§è¿”å›16-bit code unitsã€‚ä½¿ç”¨`runes`å±æ€§æ¥è·å–å­—ç¬¦ä¸²çš„`runes`ä¿¡æ¯ã€‚ä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†`runes`ã€`16-bit code units`ã€å’Œ32-bit code pointsä¹‹é—´çš„å…³ç³»ï¼š

```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){

  var clapp = '\u{1f44f}';
  print(clapp);                  //è¾“å‡ºï¼šğŸ‘

  print(clapp.codeUnits);        //è¾“å‡ºï¼š [55357, 56399]
  print(clapp.runes.toList());   //è¾“å‡ºï¼š  [128079]

  //ä½¿ç”¨String. fromCharCodesæ–¹æ³•æ˜¾ç¤ºå­—ç¬¦å›¾å½¢
  Runes input = new Runes(
      '\u2665  \u{1f605}  \u{1f60e}  \u{1f47b}  \u{1f596}  \u{1f44d}');
  print(new String.fromCharCodes(input));   //è¾“å‡ºï¼šâ™¥  ğŸ˜…  ğŸ˜  ğŸ‘»  ğŸ––  ğŸ‘

}
å¤åˆ¶ä»£ç 
```

### 14.Symbols

ä¸€ä¸ª`Symbol`objectä»£è¡¨Dartç¨‹åºå£°æ˜çš„æ“ä½œç¬¦æˆ–è€…æ ‡è¯†ç¬¦ã€‚ä½ ä¹Ÿè®¸ä»æ¥ä¸ä¼šç”¨åˆ°Symbolï¼Œä½†æ˜¯è¯¥åŠŸèƒ½å¯¹äºé€šè¿‡åå­—æ¥å¼•ç”¨æ ‡è¯†ç¬¦çš„æƒ…å†µæ˜¯éå¸¸æœ‰ä»·å€¼çš„ï¼Œç‰¹åˆ«æ˜¯æ··æ·†åçš„ä»£ç ï¼Œæ ‡è¯†ç¬¦çš„åå­—è¢«æ··æ·†äº†ï¼Œä½†æ˜¯`Symbol`çš„åå­—ä¸ä¼šæ”¹å˜ï¼Œä¸‹é¢åˆ—ä¸‹ä¾‹å­ï¼š

```
  //ä½¿ç”¨ Symbol å­—é¢é‡æ¥è·å–æ ‡è¯†ç¬¦çš„ symbol å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åœ¨æ ‡è¯†ç¬¦ å‰é¢æ·»åŠ ä¸€ä¸ª # ç¬¦å·ï¼š
  //#radix
  //#bar

  print(#n == new Symbol('n'));  //è¾“å‡ºï¼štrue

  var name = 'knight';
  Symbol symbol = #name;
  print(symbol);                //è¾“å‡ºï¼šSymbol("name")
  print(#name);                 //è¾“å‡ºï¼šSymbol("name")
å¤åˆ¶ä»£ç 
```

### 15.functionæ–¹æ³•

Dartæ˜¯ä¸€ä¸ªçœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡å¹¶ä¸”å…·æœ‰ä¸€ç§ç±»å‹ï¼Œ`Function`ã€‚è¿™æ„å‘³ç€ï¼Œæ–¹æ³•å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥å½“åšå…¶ä»–æ–¹æ³•çš„å‚æ•°ã€‚ä¹Ÿå¯ä»¥æŠŠDartç±»çš„å®ä¾‹å½“åšæ–¹æ³•æ¥è°ƒç”¨ï¼Œä¸‹é¢æ˜¯å®šä¹‰æ–¹æ³•çš„ç¤ºä¾‹ï¼š

```
//å®šä¹‰ä¸€ä¸ªæ–¹æ³• åˆ¤æ–­åˆ—è¡¨å¯¹åº”ä¸‹æ ‡æ˜¯å¦ä¸ºnull
bool isNoble(int atomicNumber) {
  return list[atomicNumber] != null;
}
å¤åˆ¶ä»£ç 
```

è™½ç„¶åœ¨Effective Dartæ¨èåœ¨å…¬å¼€çš„APIsä¸Šä½¿ç”¨é™æ€ç±»å‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å¿½ç•¥ç±»å‹å®šä¹‰ï¼š

```
//å®šä¹‰ä¸€ä¸ªæ–¹æ³• åˆ¤æ–­åˆ—è¡¨å¯¹åº”ä¸‹æ ‡æ˜¯å¦ä¸ºnull å¿½ç•¥ç±»å‹å®šä¹‰
isNoble(int atomicNumber) {
  return list[atomicNumber] != null;
}
å¤åˆ¶ä»£ç 
```

å¯¹äºåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ç¼©å†™è¯­æ³•æ¥å®šä¹‰ï¼š

```
//å®šä¹‰ä¸€ä¸ªæ–¹æ³• åˆ¤æ–­åˆ—è¡¨å¯¹åº”ä¸‹æ ‡æ˜¯å¦ä¸ºnull ç¼©å†™å†™æ³•
bool isNoble(int atomicNumber) => list[atomicNumber] != null;
å¤åˆ¶ä»£ç 
```

`=> expr`æ˜¯è¯­æ³•`{return expr;}`å½¢å¼çš„ç¼©å†™ã€‚`=>`å½¢å¼ä¹Ÿç§°ä¸ºèƒ–ç®­å¤´è¯­æ³•ã€‚æ³¨æ„ï¼šåœ¨ç®­å¤´(=>)å’Œå†’å·(;)ä¹‹é—´åªèƒ½ä½¿ç”¨ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸èƒ½ä½¿ç”¨è¯­å¥ã€‚æ–¹æ³•å¯ä»¥æœ‰ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼šå¿…éœ€å’Œå¯é€‰çš„ã€‚å¿…éœ€çš„å‚æ•°åœ¨å‚æ•°åˆ—è¡¨å‰é¢ï¼Œåé¢æ˜¯å¯é€‰å‚æ•°ã€‚

#### 15.1.Optional parameters(å¯é€‰å‚æ•°)

ä»€ä¹ˆæ˜¯å¯é€‰å‚æ•°ä¹ˆï¼Ÿå®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå½¢å‚å¯ä»¥å®šä¹‰ä¸ºå¯é€‰å‚æ•°ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œ**å¯ä»¥ä¸ä¼ è¿™ä¸ªå¯é€‰å‚æ•°**ã€‚å¯é€‰å‚æ•°å¯ä»¥æ˜¯**å‘½åå‚æ•°**æˆ–è€…**åŸºäºä½ç½®çš„å‚æ•°**ï¼Œä½†æ˜¯è¿™ä¸¤ç§å‚æ•°ä¸èƒ½**åŒæ—¶å½“åšå¯é€‰å‚æ•°**ã€‚

##### 15.1.1.Optional named parameters(å¯é€‰å‘½åå‚æ•°)

è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼`paramName:value`æ¥æŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š

```
enableFlags(bold: true, hidden: false);
å¤åˆ¶ä»£ç 
```

å®šä¹‰æ–¹æ³•æ—¶ï¼Œä½¿ç”¨`{param1,param2,...}`çš„å½¢å¼æ¥æŒ‡å®šå¯é€‰å‘½åå‚æ•°ï¼š

```
enableFlags({bool bold, bool hidden}) {
  // ...
}
å¤åˆ¶ä»£ç 
```

##### 15.1.2.Optional positional parameters(å¯é€‰ä½ç½®å‚æ•°)

æŠŠä¸€äº›æ–¹æ³•çš„å‚æ•°æ”¾åˆ°[]ä¸­å°±å˜æˆå¯é€‰ä½ç½®å‚æ•°äº†ï¼Œä¾‹å­å¦‚ä¸‹ï¼š

```
//å®šä¹‰ä¸€ä¸ªæ–¹æ³• [String device]æ˜¯å¯é€‰ä½ç½®å‚æ•° ä¹Ÿå°±æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¸ä¼ è¿™ä¸ªå‚æ•°
String say(String from, String msg, [String device]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  return result;
}

//ä¸ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨æ–¹æ³•
assert(say('Bob', 'Howdy') == 'Bob says Howdy');

//ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨æ–¹æ³•
assert(say('Bob', 'Howdy', 'smoke signal') ==
'Bob says Howdy with a smoke signal');
å¤åˆ¶ä»£ç 
```

##### 15.1.3.Default parameter value(é»˜è®¤å‚æ•°å€¼)

åœ¨å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨`=`æ¥å®šä¹‰å¯é€‰å‚æ•°çš„é»˜è®¤å€¼ã€‚é»˜è®¤å€¼åªèƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚å¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤å€¼ä¸º`null`ã€‚ä¸‹é¢æ˜¯è®¾ç½®å¯é€‰å‚æ•°é»˜è®¤å€¼çš„ç¤ºä¾‹ï¼š

```
//å®šä¹‰ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºç©ºçš„æ–¹æ³• æ–¹æ³•ä¸­hiddené»˜è®¤å€¼ä¸ºfalse
void enableFlags({bool bold = false,bool hidden = false}){

}

//è°ƒç”¨æ–¹æ³• æ²¡æœ‰ä¼ hiddençš„å€¼ï¼Œé‚£é»˜è®¤å€¼å°±æ˜¯false
enableFlags(bold:true);
å¤åˆ¶ä»£ç 
```

ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®ä½ç½®å‚æ•°çš„é»˜è®¤å€¼ï¼š

```
//å®šä¹‰ä¸€ä¸ªæ–¹æ³• è¿™ä¸ªæ–¹æ³•ä½ç½®å¯é€‰ä½ç½®å‚æ•°deviceçš„é»˜è®¤å‚æ•°æ˜¯carrier pigon
//ä¹Ÿå°±æ˜¯å½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰ä¼ è¿™ä¸ªå‚æ•°æ—¶ï¼Œè¿™ä¸ªå‚æ•°ä¼šå–é»˜è®¤å€¼
String say(String from, String msg,
    [String device = 'carrier pigeon', String mood]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  if (mood != null) {
    result = '$result (in a $mood mood)';
  }
  return result;
}

//è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•
assert(say('Bob', 'Howdy') ==
'Bob says Howdy with a carrier pigeon');
å¤åˆ¶ä»£ç 
```

è¿˜å¯ä»¥ä½¿ç”¨`list`æˆ–è€…`map`ä½œä¸ºé»˜è®¤å€¼ï¼Œä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰ä¸€ä¸ªæ–¹æ³•`doStuff()`ï¼Œå¹¶åˆ†åˆ«ä¸º`list`å’Œ`gifts`å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼š

```
//æ‰§è¡Œç¨‹åºå…¥å£
void main(){

  //è°ƒç”¨åˆ¤æ–­å¯¹åº”å°æ ‡çš„å€¼æ˜¯å¦ä¸ºç©º
 // print(isNoble(1));    //è¾“å‡ºï¼štrue


  doStuff();    //è¾“å‡ºï¼šlist:  [1, 2, 3]
                //è¾“å‡ºï¼šgifts: {first: paper, second: cotton, third: leather}


}

//Listå’ŒMapéƒ½å–äº†é»˜è®¤å€¼
void doStuff(
    {List<int> list = const [1, 2, 3],
      Map<String, String> gifts = const {
        'first': 'paper',
        'second': 'cotton',
        'third': 'leather'
      }}) {
  print('list:  $list');
  print('gifts: $gifts');
}
å¤åˆ¶ä»£ç 
```

#### 15.2.The main() function(å…¥å£å‡½æ•°)

æ¯ä¸ªåº”ç”¨éƒ½éœ€è¦æœ‰ä¸ªé¡¶çº§çš„`main()`å…¥å£æ–¹æ³•æ‰èƒ½æ‰§è¡Œã€‚`main()`æ–¹æ³•çš„è¿”å›å€¼ä¸º`void`å¹¶ä¸”æœ‰ä¸ªå¯é€‰çš„`List<String>`å‚æ•°ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªwebåº”ç”¨çš„`main()`æ–¹æ³•ï¼š

```
void main() {
  querySelector("#sample_text_id")
    ..text = "Click me!"
    ..onClick.listen(reverseText);
}
å¤åˆ¶ä»£ç 
```

åœ¨ä¸Šé¢ä»£ç ä¸­`..`yè¯­æ³•æ˜¯çº§è”è°ƒç”¨ã€‚ä½¿ç”¨çº§è”è°ƒç”¨ï¼Œ**å¯ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ªæ“ä½œ**ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨çš„`main()`æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨æ–¹æ³•å‚æ•°ä½œä¸ºè¾“å…¥å‚æ•°ï¼š

```
// Run the app like this: dart args.dart 1 test
void main(List<String> arguments) {
  print(arguments);

  assert(arguments.length == 2);
  assert(int.parse(arguments[0]) == 1);
  assert(arguments[1] == 'test');
}
å¤åˆ¶ä»£ç 
```

#### 15.3.Functions as first-class objects(ä¸€ç­‰æ–¹æ³•å¯¹è±¡)

å¯ä»¥æŠŠæ–¹æ³•å½“åšå‚æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªæ–¹æ³•ã€‚å¦‚ï¼š

```
printElement(element) {
  print(element);
}

var list = [1, 2, 3];

// éå†é›†åˆ
list.forEach(printElement);
å¤åˆ¶ä»£ç 
```

æ–¹æ³•ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼š

```
var loudify = (msg) => '!!! ${msg.toUpperCase()} !!!';
assert(loudify('hello') == '!!! HELLO !!!');
å¤åˆ¶ä»£ç 
```

#### 15.4.Anonymous functions(åŒ¿åæ–¹æ³•)

å¤§éƒ¨åˆ†æ–¹æ³•éƒ½å¸¦æœ‰åå­—ï¼Œä¾‹å¦‚`main()`æˆ–è€…`printElement()`ã€‚ä¹Ÿå¯ä»¥åˆ›å»ºæ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œç§°ä¸ºåŒ¿åæ–¹æ³•ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸º`lambda`æˆ–è€…`clourse`é—­åŒ…ã€‚å¯ä»¥æŠŠåŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œç„¶åå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚æ·»åŠ é›†åˆæˆ–è€…ä»é›†åˆä¸­åˆ é™¤ã€‚åŒ¿åå‡½æ•°å’Œå‘½åå‡½æ•°ç±»ä¼¼ï¼Œåœ¨æ‹¬å·ä¹‹é—´å¯ä»¥å®šä¹‰ä¸€äº›å‚æ•°Â·ï¼Œå‚æ•°ä½¿ç”¨é€—å·åˆ†å‰²ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯é€‰å‚æ•°ã€‚åé¢å¤§æ‹¬å·ä¸­çš„ä»£ç ä¸ºå‡½æ•°ä½“ï¼š

```
([[Type] param1[, â€¦]]) { 
  codeBlock; 
}; 
å¤åˆ¶ä»£ç 
```

ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªå‚æ•°ä¸º`i`çš„åŒ¿åå‡½æ•°ã€‚listä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶æ¥è®¡ç®—äº†æ¯ä¸ªå…ƒç´ åœ¨listä¸­çš„ç´¢å¼•ä½ç½®ã€‚

```
var list = ['apples', 'oranges', 'grapes', 'bananas', 'plums'];
list.forEach((i) {
  print(list.indexOf(i).toString() + ': ' + i);
});
//è¾“å‡ºï¼š

0: apples
1: oranges
2: grapes
3: bananas
4: plums
å¤åˆ¶ä»£ç 
```

ä¸Šé¢è¯´åˆ°å¦‚æœæ–¹æ³•åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´è¯­æ³•ç¼©å†™ï¼ŒæŠŠä¸Šé¢çš„ä»£ç æ”¹æˆä¸‹é¢åŒæ ·çš„æ„æ€ï¼š

```
list.forEach((i) => print(list.indexOf(i).toString() + ': ' + i));
å¤åˆ¶ä»£ç 
```

#### 15.5.é™æ€ä½œç”¨åŸŸ

Dartæ˜¯é™æ€ä½œç”¨åŸŸè¯­è¨€ï¼Œå˜é‡çš„ä½œç”¨åŸŸåœ¨å†™ä»£ç çš„æ—¶å€™å°±ç¼ºçš„è¿‡äº†ã€‚åŸºæœ¬ä¸Šå¤§æ‹¬å·é‡Œé¢å®šä¹‰çš„å˜é‡å°±åªèƒ½åœ¨å¤§æ‹¬å·é‡Œé¢è®¿é—®ï¼Œå’Œjavaä½œç”¨åŸŸç±»ä¼¼ã€‚

```
var topLevel = true;

main() {
  var insideMain = true;

  myFunction() {
    var insideFunction = true;

    nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}
å¤åˆ¶ä»£ç 
```

æ³¨æ„`nestedFunction`å¯ä»¥è®¿é—®æ‰€æœ‰çš„å˜é‡ï¼ŒåŒ…å«é¡¶çº§å˜é‡ã€‚

#### 15.6.Lexical closures(è¯æ³•é—­åŒ…)

ä¸€ä¸ªé—­åŒ…æ˜¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œä¸ç®¡è¯¥å¯¹è±¡åœ¨ä½•å¤„è¢«è°ƒç”¨ï¼Œè¯¥å¯¹è±¡éƒ½å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ï¼Œæ–¹æ³•å¯ä»¥å°é—­å®šä¹‰åˆ°å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚æ–¹æ³•å¯ä»¥å°é—­å®šä¹‰åˆ°å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œ`makeAdder()`æ•è·åˆ°äº†å˜é‡`addBy`ã€‚ä¸ç®¡åœ¨å“ªé‡Œæ‰§è¡Œ`makeAdder()`æ‰€è¿”å›çš„å‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨`addBy`å‚æ•°ï¼š

```
Function makeAdder(num addBy) {
  return (num i) => addBy + i;
}

main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}
å¤åˆ¶ä»£ç 
```

#### 15.7.Testing functions for equality(æµ‹è¯•å‡½æ•°æ˜¯å¦ç›¸ç­‰)

ä¸‹é¢æ˜¯æµ‹è¯•é¡¶çº§æ–¹æ³•ã€é™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•°ç›¸ç­‰çš„ç¤ºä¾‹ï¼š

```
foo() {}               // é¡¶çº§æ–¹æ³•

class A {
  static void bar() {} // é™æ€æ–¹æ³•
  void baz() {}        // å®ä¾‹æ–¹æ³•
}

void main() {
  var x;

  // æ¯”è¾ƒé¡¶çº§å‡½æ•°
  x = foo;
  print(foo == x);    //è¾“å‡ºï¼štrue

  // æ¯”è¾ƒé™æ€æ–¹æ³•
  x = A.bar;
  print(A.bar == x);  //è¾“å‡ºï¼štrue

  // æ¯”è¾ƒå®ä¾‹æ–¹æ³•
  var v = new A(); // å®ä¾‹1
  var w = new A(); // å®ä¾‹2
  var y = w;
  x = w.baz;

  //è¿™äº›é—­åŒ…å¼•ç”¨ç›¸åŒçš„å®ä¾‹
  //æ‰€æœ‰ç›¸ç­‰
  print(y.baz == x);   //è¾“å‡ºï¼štrue

  // é—­åŒ…å¼•ç”¨ä¸åŒçš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸ç›¸ç­‰`
  print(v.baz != w.baz);   //è¾“å‡ºï¼štrue
}
å¤åˆ¶ä»£ç 
```

#### 15.8.Return values (è¿”å›å€¼)

æ‰€æœ‰çš„å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™é»˜è®¤æŠŠè¯­å¥`return null;`ä½œä¸ºå‡½æ•°çš„æœ€åâ˜ä¸€ä¸ªè¯­å¥æ‰§è¡Œã€‚

### 16.Operators æ“ä½œç¬¦



![æ“ä½œç¬¦](https://user-gold-cdn.xitu.io/2019/2/6/168c0df7407daeb7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

ä¸Šé¢åˆ—äº†æ“ä½œç¬¦å’Œä¸€äº›ä¾‹å­ï¼Œåœ¨æ“ä½œç¬¦è¡¨æ ¼æ‰€åˆ—çš„æ“ä½œç¬¦éƒ½æ˜¯æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºä»å·¦åˆ°å³ï¼Œä»ä¸Šå€’ä¸‹çš„æ–¹å¼æ¥æ’åˆ—ï¼Œä¸Šé¢å’Œå·¦è¾¹çš„æ“ä½œç¬¦ä¼˜å…ˆçº§è¦é«˜äºä¸‹é¢å’Œå³è¾¹çš„ã€‚ä¾‹å¦‚

```
%
```

æ“ä½œç¬¦ä¼˜å…ˆé«˜äº

```
==
```

ï¼Œè€Œç­‰å·é«˜äº

```
&&
```

,ä¸‹é¢çš„ä»£ç ç»“æœæ˜¯ä¸€æ ·çš„ï¼š



```
void main() {
   var n = 2;
   var i = 2;
   var d = 7;
   if((n % i == 0) && (d % i == 0)){
     print('ç¬¦åˆæ¡ä»¶');
   }else{
     print('ä¸ç¬¦åˆæ¡ä»¶');       //è¿›å…¥è¿™é‡Œ
   }

   if(n % i == 0 && d % i == 0){
     print('ç¬¦åˆæ¡ä»¶');
   }else{
     print('ä¸ç¬¦åˆæ¡ä»¶');       //è¿›å…¥è¿™é‡Œ
   }
}
å¤åˆ¶ä»£ç 
```

#### 16.1.ç®—æœ¯æ“ä½œç¬¦



![ç®—æœ¯æ“ä½œç¬¦](https://user-gold-cdn.xitu.io/2019/2/6/168c1b8dede2c0a0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



#### 16.2.ç›¸ç­‰ç›¸å…³çš„æ“ä½œç¬¦



![ç›¸ç­‰ç›¸å…³çš„æ“ä½œç¬¦](https://user-gold-cdn.xitu.io/2019/2/6/168c1bff002e4710?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



#### 16.3.ç±»å‹åˆ¤å®šæ“ä½œç¬¦



![ç±»å‹åˆ¤å®šæ“ä½œç¬¦](https://user-gold-cdn.xitu.io/2019/2/6/168c1c680e78737b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

åªæœ‰

```
obj
```

å®ç°äº†

```
T
```

çš„æ¥å£ï¼Œ

```
obj is T
```

æ‰æ˜¯trueã€‚ä¾‹å¦‚

```
obj is Object
```

æ€»æ˜¯trueã€‚ä½¿ç”¨

```
as
```

æ“ä½œç¬¦å§å¯¹è±¡è½¬æ¢ä¸ºç‰¹å®šçš„ç±»å‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠå®ƒå½“åš

```
is
```

åˆ¤å®šç±»å‹ç„¶åè°ƒç”¨æ‰€åˆ¤å®šå¯¹è±¡çš„å‡½æ•°ç¼©å†™å½¢å¼ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š



```
if (emp is Person) { // Type check
  emp.firstName = 'Bob';
}
å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`as`æ“ä½œç¬¦å¯ä»¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ï¼š

```
(emp as Person).firstName = 'Bob';
å¤åˆ¶ä»£ç 
```

æ³¨æ„ï¼šä¸Šé¢çš„è¿™ä¸¤ä¸ªä»£ç æ•ˆæœæ˜¯æœ‰åŒºåˆ«çš„ã€‚å¦‚æœ`emp`æ˜¯nullæˆ–è€…ä¸æ˜¯`person`ç±»å‹ï¼Œåˆ™ç¬¬ä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨`is`åˆ™ä¸ä¼šæ‰§è¡Œæ¡ä»¶é‡Œé¢çš„ä»£ç ï¼Œè€Œç¬¬äºŒä¸ªæƒ…å†µä½¿ç”¨`as`åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

#### 16.4.èµ‹å€¼æ“ä½œç¬¦

ä½¿ç”¨`=`æ“ä½œç¬¦èµ‹å€¼ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ª`??=`æ“ä½œç¬¦æ¥æŒ‡å®šå€¼ä¸ºnullçš„å˜é‡å€¼ã€‚

```
a = value;   // ç»™ a å˜é‡èµ‹å€¼
b ??= value; // å¦‚æœ b æ˜¯ nullï¼Œåˆ™èµ‹å€¼ç»™ bï¼›
             // å¦‚æœä¸æ˜¯ nullï¼Œåˆ™ b çš„å€¼ä¿æŒä¸å˜
å¤åˆ¶ä»£ç 
```

è¿˜æœ‰å¤åˆèµ‹å€¼ç¬¦`+=`ç­‰å¯ä»¥èµ‹å€¼ï¼š



![å¤åˆèµ‹å€¼æ“ä½œç¬¦](data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="882" height="166"></svg>)

ä¸‹é¢çš„ä»£ç ä½¿ç”¨èµ‹å€¼æ“ä½œç¬¦ç¬¦åˆå¤åˆèµ‹å€¼æ“ä½œç¬¦ï¼š



```
var a = 2;           // Assign using =
a *= 3;              // Assign and multiply: a = a * 3
assert(a == 6);
å¤åˆ¶ä»£ç 
```

ä¸‹é¢æ˜¯å¤åˆèµ‹å€¼æ“ä½œç¬¦å·¥ä½œåŸç†è§£é‡Šï¼š

![å¤åˆèµ‹å€¼æ“ä½œç¬¦è§£é‡Š](data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="890" height="338"></svg>)



#### 16.5.é€»è¾‘æ“ä½œç¬¦



![é€»è¾‘æ“ä½œç¬¦](data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="878" height="388"></svg>)



#### 16.6.ä½å’Œç§»ä½æ“ä½œç¬¦

åœ¨Dartä¸­å¯ä»¥å•ç‹¬æ“ä½œæ•°å­—çš„æŸä¸€ä½ï¼Œä¸‹é¢æ“ä½œç¬¦åŒæ ·åº”ç”¨äºæ•´æ•°ï¼š



![ä½ä¸ç§»ä½æ“ä½œç¬¦](data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="902" height="624"></svg>)



#### 16.7.æ¡ä»¶è¡¨è¾¾å¼

Dartæœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦å¯ä»¥ç”¨æ¥æ›¿ä»£`if-else`è¯­å¥ï¼š `condition ? expr1 : expr2` å¦‚æœconditionæ˜¯trueï¼Œæ‰§è¡Œexpr1(å¹¶è¿”å›æ‰§è¡Œçš„ç»“æœ)ï¼›å¦åˆ™æ‰§è¡Œexpr2å¹¶è¿”å›ç»“æœã€‚ `expr1 ?? expr2`å¦‚æœexpr1æ˜¯non-nullï¼Œè¿”å›å…¶å€¼ï¼›å¦åˆ™æ‰§è¡Œexpr2å¹¶è¿”å›å…¶ç»“æœã€‚å¦‚æœæ˜¯åŸºäºå¸ƒå°”è¡¨è¾¾å¼çš„å€¼æ¥èµ‹å€¼ï¼Œè€ƒè™‘ä½¿ç”¨`?:`

```
var finalStatus = m.isFinal ? 'final' : 'not final';
å¤åˆ¶ä»£ç 
```

å¦‚æœæ˜¯åŸºäºå¸ƒå°”è¡¨è¾¾å¼æ˜¯æµ‹è¯•å€¼æ˜¯å¦ä¸ºnullï¼Œè€ƒè™‘ä½¿ç”¨`??`

```
String toString() => msg ?? super.toString();

//ä¸Šé¢ä»£ç å¯ä»¥ç”¨ä¸‹é¢ä»£ç æ¥è¡¨ç¤ºï¼Œæ„æ€æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä»£ç æ˜“æ‡‚ä½†æ˜¯ä¸ç®€æ´
String toString() => msg == null ? super.toString() : msg;

String toString() {
  if (msg == null) {
    return super.toString();
  } else {
    return msg;
  }
}
å¤åˆ¶ä»£ç 
```

#### 16.8.çº§è”æ“ä½œç¬¦

çº§è”æ“ä½œç¬¦(..)å¯ä»¥åœ¨åŒä¸€å¯¹è±¡ä¸Šè¿ç»­è°ƒç”¨å¤šä¸ªå‡½æ•°ä»¥åŠè®¿é—®æˆå‘˜å˜é‡ã€‚ä½¿ç”¨çº§è”æ“ä½œç¬¦å¯ä»¥é¿å…åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œå¹¶ä¸”å†™å‡ºæ¥çš„ä»£ç çœ‹èµ·æ¥æ›´åŠ æµç•…ï¼Œå¦‚ï¼š

```
querySelector('#button') // Get an object.
  ..text = 'Confirm'   // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) => window.alert('Confirmed!'));
å¤åˆ¶ä»£ç 
```

ç¬¬ä¸€ä¸ªæ–¹æ³•`quertSelector`è¿”å›ä¸€ä¸ªselectorå¯¹è±¡ã€‚åé¢çš„çº§è”æ“ä½œç¬¦éƒ½æ˜¯è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æˆå‘˜ï¼Œå¹¶å¿½ç•¥æ¯ä¸ªæ“ä½œæ‰€è¿”å›çš„å€¼ã€‚ä¸Šé¢ä»£ç å’Œä¸‹é¢çš„ä»£ç åŠŸèƒ½ä¸€æ ·ï¼š

```
var button = querySelector('#button');
button.text = 'Confirm';
button.classes.add('important');
button.onClick.listen((e) => window.alert('Confirmed!'));
å¤åˆ¶ä»£ç 
```

çº§è”è°ƒç”¨ä¹Ÿå¯ä»¥åµŒå¥—ï¼š

```
final addressBook = (new AddressBookBuilder()
      ..name = 'jenny'
      ..email = 'jenny@example.com'
      ..phone = (new PhoneNumberBuilder()
            ..number = '415-555-0100'
            ..label = 'home')
          .build())
    .build();
å¤åˆ¶ä»£ç 
```

åœ¨æ–¹æ³•ä¸Šä½¿ç”¨çº§è”æ“ä½œç¬¦éœ€è¦éå¸¸å°å¿ƒï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç æ˜¯ä¸åˆæ³•çš„ï¼š

```
var sb = new StringBuffer();
sb.write('foo')..write('bar');
å¤åˆ¶ä»£ç 
```

`sb.write`å‡½æ•°è¿”å›ä¸€ä¸ªvoidï¼Œæ— æ³•å†`void`ä¸Šä½¿ç”¨çº§è”æ“ä½œç¬¦ã€‚æ³¨æ„çº§è”è¯­æ³•ä¸æ˜¯æ“ä½œç¬¦ï¼Œåªæ˜¯è¯­æ³•ï¼

### 17.Control flow statements(æµç¨‹æ§åˆ¶è¯­å¥)

Dartä¸­çš„æ§åˆ¶æµç¨‹è¯­å¥å’Œjavaè¯­è¨€å¾ˆåƒï¼Œå¯ä»¥è¯´æ˜¯å·®ä¸å¤šçš„ï¼š

#### 17.1.if else

```
if (isRaining()) {//æ¡ä»¶è¯­å¥
  you.bringRainCoat();//å†…å®¹ä½“
} else if (isSnowing()) {//æ¡ä»¶è¯­å¥
  you.wearJacket();//å†…å®¹ä½“
} else {
  car.putTopDown();//å†…å®¹ä½“
}
å¤åˆ¶ä»£ç 
```

#### 17.2.forå¾ªç¯

å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„`for`å¾ªç¯ï¼š

```
var message = new StringBuffer("Dart is fun");
for (var i = 0; i < 5; i++) {
  message.write('!');
}

//ä½¿ç”¨foreachå¾ªç¯ list å’Œ Setéƒ½å¯ä»¥ç”¨è¿™ç§æ–¹å¼
List numbers = [1,2,3,4,5,6,7,8,9ï¼Œ10];
numbers.foreach((number)=> print(number));

//ä½¿ç”¨for inå¾ªç¯ï¼Œä¸€èˆ¬Listå’ŒSetéƒ½æ˜¯ç”¨è¿™ç§æ–¹å¼
List numbers = [1,2,3,4,5,6,7,8,9ï¼Œ10];
for(var number in numbers){
     print(number);
}
å¤åˆ¶ä»£ç 
```

#### 17.3.While and do-while

`while`å¾ªç¯åœ¨æ‰§è¡Œå¾ªç¯ä¹‹å‰å…ˆåˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼š

```
//åˆ¤æ–­æ¡ä»¶
while (!isDone()) {
  //å†…å®¹
  doSomething();
}

//ä¾‹å­
var i = 0;
while(i > 5){
    i++;
}
å¤åˆ¶ä»£ç 
```

è€Œ`do-while`å¾ªç¯æ˜¯å…ˆæ‰§è¡Œå¾ªç¯ä»£ç å†åˆ¤æ–­æ¡ä»¶ï¼š

```
do {
  printLine();//å†…å®¹ä½“
} while (!atEndOfPage());//æ¡ä»¶åˆ¤æ–­
//ä¾‹å­
var i = 0;
do{
    i++;
}while(i > 7);
å¤åˆ¶ä»£ç 
```

#### 17.4.Break and continue

ä½¿ç”¨`break`æ¥ç»ˆæ­¢å¾ªç¯ï¼š

```
while (true) {
  if (shutDownRequested()) break;
  processIncomingRequests();
}
å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`continue`æ¥å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ï¼š

```
for (int i = 0; i < candidates.length; i++) {
  var candidate = candidates[i];
  if (candidate.yearsExperience < 5) {
    continue;
  }
  candidate.interview();
}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢ä»£ç åœ¨å®ç°`Iterable`æ¥å£å¯¹è±¡(Listå’ŒMap)å¯ä»¥ä½¿ç”¨ä¸‹é¢å†™æ³•ï¼š

```
candidates.where((c) => c.yearsExperience >= 5)
          .forEach((c) => c.interview());
å¤åˆ¶ä»£ç 
```

#### 17.5.Switch and case

Dartä¸­çš„Switchè¯­å¥ä½¿ç”¨`==`æ¯”è¾ƒintegerã€Stringã€æˆ–è€…ç¼–è¯‘æ—¶å¸¸é‡ã€‚æ¯”è¾ƒçš„å…‘ç°å¿…é¡»éƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å®ä¾‹ï¼ˆå¹¶ä¸”ä¸æ˜¯å…¶ä¹‹ç±»ï¼‰ï¼Œcalsså¿…é¡»æ²¡æœ‰è¦†å†™`==`æ“ä½œç¬¦ï¼Œæ¯ä¸ªéç©ºçš„`case`è¯­å¥éƒ½å¿…é¡»æœ‰ä¸€ä¸ª`break`è¯­å¥ã€‚å¦å¤–è¿˜å¯ä»¥é€šè¿‡`continue`ã€`throw`ã€`return`æ¥ä»‹ç»éç©º`case`è¯­å¥ã€‚å½“æ²¡æœ‰`case`è¯­å¥åŒ¹é…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`default`è¯­å¥æ¥åŒ¹é…è¿™ç§é»˜è®¤æƒ…å†µã€‚

```
var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'PENDING':
    executePending();
    break;
  case 'APPROVED':
    executeApproved();
    break;
  case 'DENIED':
    executeDenied();
    break;
  case 'OPEN':
    executeOpen();
    break;
  default:
    executeUnknown();
}
å¤åˆ¶ä»£ç 
```

ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å†`case`çœç•¥äº†`break`è¯­å¥ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ï¼š

```
void main() {

  var number = 1;
  var i = 0;
  switch(number){
    case 1;
    i++;
    case 2:
      i--;
      break;

  }

}
å¤åˆ¶ä»£ç 
```

åœ¨Dartä¸­çš„ç©º`case`è¯­å¥ä¸­å¯ä»¥ä¸è¦breakè¯­å¥ï¼š

```
void main() {

  var number = 1;
  var i = 0;
  switch(number){
    case 1;
    i++;
    case 2:
      i--;
      break;

  }

}
å¤åˆ¶ä»£ç 
```

å¦‚æœéœ€è¦å®ç°è¿™ç§ç»§ç»­åˆ°ä¸‹ä¸€ä¸ª`case`è¯­å¥ä¸­ç»§ç»­æ‰§è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨`continue`è¯­å¥è·³è½¬å¯¹åº”çš„æ ‡ç­¾å¤„ç»§ç»­æ‰§è¡Œï¼š

```
void main() {

  var number = 1;
  var i = 0;
  switch(number){
    case 1;
    i++;
    case 2:
      i--;
      break;

  }

}
å¤åˆ¶ä»£ç 
```

æ¯ä¸ª`case`è¯­å¥å¯ä»¥æœ‰å±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡åªæœ‰åœ¨è¿™ä¸ªè¯­å¥å†…å¯è§ã€‚

#### 17.6.Assert(æ–­è¨€)

å¦‚æœæ¡ä»¶è¡¨è¾¾å¼ç»“æœä¸æ»¡è¶³éœ€è¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`assert`è¯­å¥ä¿©æ‰“æ–­ä»£ç çš„æ‰§è¡Œã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
// ç¡®ä¿å˜é‡æ˜¯éç©ºå€¼ 
assert(text != null);
// ç¡®ä¿å€¼æ˜¯å°äº100
assert(number < 100);
// ç¡®ä¿è¿™æ˜¯ä¸€ä¸ª https åœ°å€
assert(urlString.startsWith('https'));
å¤åˆ¶ä»£ç 
```

`assert`ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ï¼Œ`assert`æ–¹æ³•å‚æ•°å¯ä»¥ä¸ºä»»ä½•å¸ƒå°”å€¼çš„è¡¨è¾¾å¼æˆ–è€…æ–¹æ³•ã€‚å¦‚æœè¿”å›çš„å€¼ä¸ºtrueï¼Œæ–­è¨€æ‰§è¡Œé€šè¿‡ï¼Œæ‰§è¡Œç»“æŸã€‚å¦‚æœè¿”å›å€¼ä¸ºfalseï¼Œæ–­è¨€æ‰§è¡Œå¤±è´¥ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ–­è¨€åªæœ‰åœ¨æ£€æŸ¥æ¨¡å¼è¿è¡Œæœ‰æ•ˆï¼Œå¦‚æœç”Ÿäº§æ¨¡å¼è¿è¡Œï¼Œåˆ™æ–­è¨€ä¸ä¼šæ‰§è¡Œã€‚

### 18.Exceptions(å¼‚å¸¸)

ä»£ç ä¸­å¯ä»¥å‡ºç°å¼‚å¸¸å’Œæ•è·å¼‚å¸¸ã€‚å¼‚å¸¸è¡¨ç¤ºä¸€äº›æœªçŸ¥çš„é”™è¯¯æƒ…å†µã€‚å¦‚æœå¼‚å¸¸æ²¡æœ‰æ•è·ï¼Œåˆ™å¼‚å¸¸ä¼šæŠ›å‡ºï¼Œå¯¼è‡´æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ç»ˆæ­¢æ‰§è¡Œã€‚å’Œjavaä¸åŒçš„æ˜¯ï¼Œæ‰€æœ‰çš„Dartå¼‚å¸¸æ˜¯éæ£€æŸ¥å¼‚å¸¸ã€‚æ–¹æ³•ä¸ä¸€å®šå£°æ˜Â·æ¥çœ‹ä»–ä»¬æ‰€æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¹¶ä¸”ä½ ä¸è¦æ±‚æ•è·å¼‚å¸¸ï¼ŒDartæä¾›äº†`Exception`å’Œ`Error`ç±»å‹ï¼Œä»¥åŠä¸€äº›å­ç±»å‹ã€‚è¿˜å¯ä»¥è‡ªå·±å®šä¹‰å¼‚å¸¸ç±»å‹ã€‚ä½†æ˜¯ï¼ŒDartä»£ç å¯ä»¥æŠ›å‡ºä»»ä½•énullå¯¹è±¡ä¸ºå¼‚å¸¸ï¼Œä¸ä»…ä»…æ˜¯å®ç°äº†`Exception`å’Œ`Error`å¯¹è±¡ã€‚

#### 18.1.Throw

ä¸‹é¢æ˜¯æŠ›å‡ºæˆ–è€…æ‰”å‡ºä¸€ä¸ªå¼‚å¸¸çš„ç¤ºä¾‹ï¼š

```
thow new FormatException('Expected at least 1 section');
å¤åˆ¶ä»£ç 
```

è¿˜å¯ä»¥æŠ›å‡ºä»»æ„å¯¹è±¡ï¼š

```
throw 'Out of llamas!';
å¤åˆ¶ä»£ç 
```

ç”±äºæŠ›å‡ºå¼‚å¸¸æ—¶ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨=>è¯­å¥ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–èƒ½ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚

```
distanceTo(Point other) =>
    throw new UnimplementedError();
å¤åˆ¶ä»£ç 
```

#### 18.2.Catch

æ•è·å¼‚å¸¸å¯ä»¥é¿å…å¼‚å¸¸ç»§ç»­ä¼ é€’(é‡æ–°æŠ›å‡ºrethrow)å¼‚å¸¸é™¤å¤–ã€‚æ•è·å¼‚å¸¸ç»™ä½ ä¸€ä¸ªå¤„ç†è¯¥å¼‚å¸¸çš„æœºä¼šï¼š

```
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  buyMoreLlamas();
}
å¤åˆ¶ä»£ç 
```

å¯¹äºå¯ä»¥æŠ›å‡ºå¤šç§ç±»å‹å¼‚å¸¸çš„ä»£ç ï¼Œä½ å¯ä»¥æŒ‡å®šå¤šä¸ªæ•è·è¯­å¥ã€‚æ¯ä¸ªè¯­å¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¦‚æœæ•è·è¯­å¥æ²¡æœ‰æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œåˆ™è¯¥å¯ä»¥æ•è·ä»»ä½•å¼‚å¸¸ç±»å‹ï¼š

```
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print('Unknown exception: $e');
} catch (e) {
  // No specified type, handles all
  print('Something really unknown: $e');
}
å¤åˆ¶ä»£ç 
```

å¦‚ä¹‹å‰ä»£ç æ‰€ç¤ºï¼Œå¯ä»¥ä½¿ç”¨`on`æˆ–è€…`catch`æ¥å£°æ˜æ•è·è¯­å¥ï¼Œä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨ã€‚ä½¿ç”¨`on`æ¥æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œä½¿ç”¨`catch`æ¥æ•è·å¼‚å¸¸å¯¹è±¡ã€‚å‡½æ•°`catch()`å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªä¸ºå †æ ˆä¿¡æ¯ã€‚

```
  ...
} on Exception catch (e) {
  print('Exception details:\n $e');
} catch (e, s) {
  print('Exception details:\n $e');
  print('Stack trace:\n $s');
}
å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`rethrow`å…³é”®å­—å¯ä»¥æŠŠæ•è·çš„å¼‚å¸¸é‡æ–°æŠ›å‡ºï¼š

```
final foo = '';

void misbehave() {
  try {
    foo = "You can't change a final variable's value.";
  } catch (e) {
    print('misbehave() partially handled ${e.runtimeType}.');
    rethrow; // Allow callers to see the exception.
  }
}

void main() {
  try {
    misbehave();
  } catch (e) {
    print('main() finished handling ${e.runtimeType}.');
  }
}
å¤åˆ¶ä»£ç 
```

#### 18.3.Finally

æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œè¦ç¡®ä¿æŸäº›ä»£ç éƒ½è¦æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨`finally`è¯­å¥æ¥å®ç°ã€‚å¦‚æœæ²¡æœ‰`catch`è¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œåˆ™åœ¨æ‰§è¡Œå®Œ`finally`è¯­å¥åï¼Œå¼‚å¸¸è¢«æŠ›å‡ºäº†ï¼š

```
try {
  breedMoreLlamas();
} finally {
  // å³ä½¿æŠ›å‡ºå¼‚å¸¸ä¹Ÿä¼šæ‰§è¡Œ
  cleanLlamaStalls();
}
å¤åˆ¶ä»£ç 
```

å®šä¹‰çš„`finally`è¯­å¥åœ¨ä»»ä½•åŒ¹é…çš„`catch`è¯­å¥ä¹‹åæ‰§è¡Œï¼š

```
try {
  breedMoreLlamas();
} catch(e) {
  print('Error: $e');  // ä¼˜å…ˆå¤„ç†å¼‚å¸¸
} finally {
  cleanLlamaStalls();  // ç„¶åå†æ‰§è¡Œ
}
å¤åˆ¶ä»£ç 
```

### 19.Classes

Dartæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ŒåŒæ—¶æ”¯æŒåŸºäºmixinçš„ç»§æ‰¿æœºåˆ¶ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿äº`object`ã€‚åŸºäºMixinçš„ç»§æ‰¿æ„å‘³ç€æ¯ä¸ªç±»(Objecté™¤å¤–)éƒ½åªæœ‰ä¸€ä¸ªè¶…ç±»ï¼Œä¸€ä¸ªç±»çš„ä»£ç å¯ä»¥åœ¨å…¶ä»–å¤šä¸ªç±»ç»§æ‰¿ä¸­é‡å¤ä½¿ç”¨Â·ã€‚ä½¿ç”¨`new`å…³é”®å­—å’Œæ„é€ å‡½æ•°æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚æ„é€ å‡½æ•°åå­—å¯ä»¥ä¸º`ClassName`æˆ–è€…`ClassName.identifier`ã€‚ä¾‹å¦‚ï¼š

```
var jsonData = JSON.decode('{"x":1, "y":2}');

// åˆ›å»ºPointç±»å‹çš„å¯¹è±¡
var p1 = new Point(2, 2);

// æ ¹æ®jsonæ¥åˆ›å»ºPointå¯¹è±¡
var p2 = new Point.fromJson(jsonData);
å¤åˆ¶ä»£ç 
```

å¯¹è±¡çš„æˆå‘˜åŒ…æ‹¬æ–¹æ³•å’Œæ•°æ®(å‡½æ•°å’Œç¤ºä¾‹å˜é‡)ã€‚å½“ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä½ æ˜¯åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ï¼šå‡½æ•°éœ€è¦è®¿é—®å¯¹è±¡çš„æ–¹æ³•å’Œæ•°æ®ï¼Œä½¿ç”¨(.)æ¥å¼•ç”¨å¯¹è±¡çš„å˜é‡æˆ–è€…æ–¹æ³•ï¼š

```
var p = new Point(2, 2);

// å¯¹å®ä¾‹å¯¹è±¡çš„å˜é‡yèµ‹å€¼
p.y = 3;

// ä»æˆå‘˜å˜é‡å¾—åˆ°å€¼
assert(p.y == 3);

// ä»på¤åˆ¶å®ä¾‹å¯¹è±¡
num distance = p.distanceTo(new Point(4, 4));
å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`?.`æ¥æ›¿ä»£ï¼Œå¯ä»¥é¿å…å½“å·¦è¾¹å¯¹è±¡ä¸ºnullæ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼š

```
//å¦‚æœPä¸æ˜¯ç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹å…¶å˜é‡yèµ‹å€¼
p?.y = 4;
å¤åˆ¶ä»£ç 
```

æœ‰äº›ç±»æä¾›äº†å¸¸é‡æ„é€ å‡½æ•°ã€‚ä½¿ç”¨å¸¸é‡æ„é€ å‡½æ•°å¯ä»¥åˆ›å»ºç¼–è¯‘æ—¶å¸¸é‡ï¼Œè¦ä½¿ç”¨å¸¸é‡æ„é€ å‡½æ•°åªéœ€è¦ç”¨`const`æ›¿ä»£`new`å³å¯ï¼š

```
var p = const ImmutablePoint(2, 2);
å¤åˆ¶ä»£ç 
```

ä¸¤ä¸ªä¸€æ ·çš„ç¼–è¯‘æ—¶å¸¸é‡å…¶å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼š

```
var a = const ImmutablePoint(1, 1);
var b = const ImmutablePoint(1, 1);

print(identical(a, b)); // å®ƒä»¬æ˜¯ç›¸åŒçš„å®ä¾‹ï¼Œè¾“å‡ºtrue
å¤åˆ¶ä»£ç 
```

å¯ä»¥ä½¿ç”¨Objectçš„`runtimeType`å±æ€§æ¥åˆ¤æ–­å®ä¾‹çš„ç±»å‹ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ª`Type`å¯¹è±¡ã€‚

```
print('The type of a is ${a.runtimeType}');
å¤åˆ¶ä»£ç 
```

#### 19.1.Instance variables

ä¸‹é¢æ˜¯å¦‚ä½•å®šä¹‰å®ä¾‹å˜é‡çš„ç¤ºä¾‹ï¼š

```
class Point{
  num x;//å£°æ˜å®ä¾‹å˜é‡xï¼Œåˆå§‹åŒ–ä¸ºç©º
  num y;//å£°æ˜å®ä¾‹å˜é‡yï¼Œèˆ’é€‚åŒ–ä¸ºç©º
  num z = 0;//å£°æ˜å®ä¾‹å˜é‡zï¼Œåˆå§‹åŒ–ä¸º0
}
å¤åˆ¶ä»£ç 
```

æ‰€æœ‰æ²¡æœ‰åˆå§‹åŒ–æ—¶å˜é‡å€¼éƒ½æ˜¯`null`ã€‚æ¯ä¸ªå®ä¾‹å˜é‡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª`getter`æ–¹æ³•ã€‚`Non-final`å®ä¾‹å˜é‡è¿˜ä¼šè‡ªå®šç”Ÿæˆä¸€ä¸ª`setter`æ–¹æ³•ï¼š

```
class Point{
  num x;//å£°æ˜å®ä¾‹å˜é‡xï¼Œåˆå§‹åŒ–ä¸ºç©º
  num y;//å£°æ˜å®ä¾‹å˜é‡yï¼Œèˆ’é€‚åŒ–ä¸ºç©º
  num z = 0;//å£°æ˜å®ä¾‹å˜é‡zï¼Œåˆå§‹åŒ–ä¸º0
}
void main() {
  var point = new Point();
  point.x = 4;              //ä½¿ç”¨setteræ–¹æ³•å¯¹xå˜é‡èµ‹å€¼
  print(point.x == 4);      //è¾“å‡ºtrue ä½¿ç”¨getterè·å–xå˜é‡çš„å€¼
  print(point.y == null);   //è¾“å‡ºtrue

}
å¤åˆ¶ä»£ç 
```

å¦‚æœåœ¨å®ä¾‹å˜é‡å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–è¯¥å˜é‡(ä¸æ˜¯åœ¨æ„é€ å‡½æ•°æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­åˆå§‹åŒ–)ï¼Œæ”¹å€¼æ˜¯åœ¨å®ä¾‹å¯¹è±¡çš„æ—¶å€™åˆå§‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–å‚æ•°åˆ—è¡¨æ‰§è¡Œä¹‹å‰ã€‚

#### 19.2.Constructors

å®šä¹‰ä¸€ä¸ªå’Œç±»åå­—ä¸€æ ·çš„æ–¹æ³•å°±å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°è¿˜å¯ä»¥å¸¦æœ‰å…¶ä»–å¯é€‰çš„æ ‡è¯†ç¬¦ã€‚å¸¸è§çš„æ„é€ å‡½æ•°ç”Ÿä¸€ä¸ªå¯¹è±¡çš„æ–°å®ä¾‹ï¼š

```
class Point {
  num x;
  num y;

  Point(num x, num y) {
    this.x = x;
    this.y = y;
  }
}
å¤åˆ¶ä»£ç 
```

`this`å…³é”®å­—æŒ‡å½“å‰çš„å®ä¾‹ã€‚åªæœ‰å½“åå­—å†²çªçš„æ—¶å€™æ‰ä½¿ç”¨thisã€‚ç”±äºæ„é€ å‡½æ•°å‚æ•°èµ‹å€¼ç»™å®ä¾‹å˜é‡çš„åœºæ™¯å¤ªå¸¸è§äº†ï¼ŒDartæä¾›ä¸€ä¸ªè¯­æ³•ç³–æ¥ç®€åŒ–è¿™ä¸ªæ“ä½œï¼š

```
class Point {
  num x;
  num y;

  // è®¾ç½®xå’Œyçš„è¯­æ³•ç³–
  // åœ¨æ„é€ å‡½æ•°ä¸»ä½“è¿è¡Œä¹‹å‰
  Point(this.x, this.y);
}
å¤åˆ¶ä»£ç 
```

##### 19.2.1.Default copnstructors(é»˜è®¤æ„é€ å‡½æ•°)

å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šæœ‰ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨è¶…ç±»çš„æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°

##### 19.2.2.Constructors arenâ€™t inherited(æ„é€ å‡½æ•°ä¸ä¼šç»§æ‰¿)

å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°ã€‚å­ç±»å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™åªæœ‰ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚

##### 19.2.3.Named constructors(å‘½åæ„é€ å‡½æ•°)

ä½¿ç”¨å‘½åæ„é€ å‡½æ•°å¯ä»¥ä¸ºä¸€ä¸ªç±»å®ç°å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ–è€…ä½¿ç”¨å‘½åæ„é€ å‡½æ•°æ¥æ›´æ¸…æ™°è‡ªå·±çš„æ„å›¾ï¼š

```
class Point {
  num x;
  num y;

  Point(this.x, this.y);

  // å‘½åæ„é€ å‡½æ•°
  Point.fromJson(Map json) {
    x = json['x'];
    y = json['y'];
  }
}
å¤åˆ¶ä»£ç 
```

æ„é€ å‡½æ•°ä¸èƒ½ç»§æ‰¿ï¼Œæ‰€ä»¥è¶…ç±»çš„å‘½åæ„é€ å‡½æ•°ä¹Ÿä¸ä¼šè¢«ç»§æ‰¿ï¼Œå¦‚æœå­ç±»ä¹Ÿæœ‰è¶…ç±»ä¸€æ ·å‘½åæ„é€ å‡½æ•°ï¼Œå°±å¿…é¡»åœ¨å­ç±»ä¸­è‡ªå·±å®ç°è¯¥æ„é€ å‡½æ•°ã€‚

##### 19.2.4.Invoking a non-default superclass constructor(è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°)

é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»çš„æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨è¶…ç±»çš„æ— åæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚**è¶…ç±»çš„æ„é€ å‡½æ•°åœ¨å­ç±»æ„é€ å‡½æ•°ä½“å¼€å§‹æ‰§è¡Œçš„ä½ç½®è°ƒç”¨**ã€‚å¦‚æœæä¾›äº†ä¸€ä¸ª initializer listï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰ ï¼Œåˆ™åˆå§‹åŒ–å‚æ•°åˆ—è¡¨åœ¨è¶…ç±»æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚ ä¸‹é¢æ˜¯æ„é€ å‡½æ•°æ‰§è¡Œé¡ºåºï¼š

1. initializer listï¼ˆåˆå§‹åŒ–å‚æ•°åˆ—è¡¨ï¼‰
2. superclassâ€™s no-arg constructorï¼ˆè¶…ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰
3. main classâ€™s no-arg constructorï¼ˆä¸»ç±»çš„æ— åæ„é€ å‡½æ•°ï¼‰

å¦‚æœè¶…ç±»æ²¡æœ‰æ— åæ— å‚æ„é€ å‡½æ•°ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å»è°ƒç”¨è¶…ç±»çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚åœ¨æ„é€ å‡½æ•°å‚æ•°åä½¿ç”¨å†’å·`:`å¯ä»¥è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼Œä¸‹é¢ä¸­ï¼Œ`Employee`ç±»çš„æ„é€ å‡½æ•°è°ƒç”¨è¶…ç±»`Person`çš„å‘½åæ„é€ å‡½æ•°ï¼š

```
//å®šä¹‰Personç±»
class Person {
  String firstName;

  Person.fromJson(Map data) {
    print('in Person');
  }
}

class Employee extends Person {
  // Person æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°
  // you must call super.fromJson(data).
  Employee.fromJson(Map data) : super.fromJson(data) {
    print('in Employee');
  }
}

main() {
  var emp = new Employee.fromJson({});

  // æ‰“å°è¾“å‡º
  // in Person
  // in Employee

}
å¤åˆ¶ä»£ç 
```

ç”±äºè¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥æ“¦æ‹­å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼š

```
class Employee extends Person {
  // ...
  Employee() : super.fromJson(findDefaultData());
}
å¤åˆ¶ä»£ç 
```

å¦‚æœåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨ super()ï¼Œéœ€è¦æŠŠå®ƒæ”¾åˆ°æœ€åã€‚è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°çš„å‚æ•°æ— æ³•è®¿é—® thisã€‚ ä¾‹å¦‚ï¼Œå‚æ•°å¯ä»¥ä¸ºé™æ€å‡½æ•°ä½†æ˜¯ä¸èƒ½æ˜¯å®ä¾‹å‡½æ•°ã€‚

#### 19.3.Initializer list(åˆå§‹åŒ–åˆ—è¡¨)

åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰é™¤äº†å¯ä»¥è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ åˆå§‹åŒ–å®ä¾‹å‚æ•°ã€‚ ä½¿ç”¨é€—å·åˆ†éš”åˆå§‹åŒ–è¡¨è¾¾å¼:

```
class Point {
  num x;
  num y;

  Point(this.x, this.y);

  // åˆå§‹åŒ–åˆ—è¡¨åœ¨æ„é€ å‡½æ•°ä½“è¿è¡Œä¹‹å‰è®¾ç½®å®ä¾‹å˜é‡ã€‚
  Point.fromJson(Map jsonMap)
      : x = jsonMap['x'],
        y = jsonMap['y'] {
    print('In Point.fromJson(): ($x, $y)');
  }
}
å¤åˆ¶ä»£ç 
```

åˆå§‹åŒ–è¡¨è¾¾å¼ç­‰å·å³è¾¹çš„éƒ¨åˆ†ä¸èƒ½è®¿é—® `this`ã€‚åˆå§‹åŒ–åˆ—è¡¨éå¸¸é€‚åˆç”¨æ¥è®¾ç½® final å˜é‡çš„å€¼ã€‚ ä¸‹é¢ç¤ºä¾‹ä»£ç ä¸­åˆå§‹åŒ–åˆ—è¡¨è®¾ç½®äº†ä¸‰ä¸ª final å˜é‡çš„å€¼:

```
import 'dart:math';

export 'src/DartProject_base.dart';

// TODO: Export any libraries intended for clients of this package.


class Point {
 final num x;
 final num y;
 final num distanceFromOrigin;

 Point(x, y)
     : x = x,
       y = y,
       distanceFromOrigin = sqrt(x * x + y * y);
}

main() {
 var p = new Point(2, 3);
 print(p.distanceFromOrigin);//è¾“å‡ºï¼š3.605551275463989
}
å¤åˆ¶ä»£ç 
```

#### 19.4.Redirecting constructors(é‡å®šå‘æ„é€ å‡½æ•°)

æœ‰æ—¶å€™ä¸€ä¸ªæ„é€ å‡½æ•°ä¼šè°ƒåŠ¨ç±»ä¸­çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚ä¸€ä¸ªé‡å®šå‘æ„é€ å‡½æ•°æ˜¯æ²¡æœ‰ä»£ç çš„ï¼Œåœ¨æ„é€ å‡½æ•°å£°æ˜åï¼Œä½¿ç”¨å†’å·è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°ã€‚

```
class Point {
  num x;
  num y;

  // ä¸»æ„é€ å‡½æ•°
  Point(this.x, this.y);

  // è°ƒç”¨ä¸»æ„é€ å‡½æ•°
  Point.alongXAxis(num x) : this(x, 0);
}
å¤åˆ¶ä»£ç 
```

#### 19.5.Constant constructors(å¸¸é‡æ„é€ å‡½æ•°)

å¦‚æœä½ çš„ç±»æä¾›ä¸€ä¸ªçŠ¶æ€ä¸å˜çš„å¯¹è±¡ï¼Œä½ å¯ä»¥æŠŠè¿™äº›å¯¹è±¡å®šä¹‰ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª`const`æ„é€ å‡½æ•°ï¼Œ å¹¶ä¸”å£°æ˜æ‰€æœ‰ç±»çš„å˜é‡ä¸º`final`ã€‚

```
class ImmutablePoint {
  final num x;
  final num y;
  const ImmutablePoint(this.x, this.y);
  static final ImmutablePoint origin =
      const ImmutablePoint(0, 0);
}
å¤åˆ¶ä»£ç 
```

#### 19.6.Factory constructors(å·¥å‚æ–¹æ³•æ„é€ å‡½æ•°)

å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°å¹¶ä¸æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨`factory`æ¥å®šä¹‰è¿™ä¸ªæ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•°å¯èƒ½ä»ç¼“å­˜ä¸­è·å–ä¸€ä¸ªå®ä¾‹å¹¶è¿”å›ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå­ç±»å‹çš„å®ä¾‹ã€‚ä¾‹å­ï¼š

```
class Logger {
  final String name;
  bool mute = false;

  static final Map<String, Logger> _cache =
      <String, Logger>{};

  factory Logger(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final logger = new Logger._internal(name);
      _cache[name] = logger;
      return logger;
    }
  }

  Logger._internal(this.name);

  void log(String msg) {
    if (!mute) {
      print(msg);
    }
  }
}
å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`new`å…³é”®å­—æ¥è°ƒç”¨å·¥å‚æ„é€ å‡½æ•°

```
var logger = new Logger('UI');
logger.log('Button clicked');
å¤åˆ¶ä»£ç 
```

#### 19.7.å‡½æ•°

å‡½æ•°æ˜¯ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œæ˜¯ç±»å¯¹è±¡çš„è¡Œä¸ºã€‚

##### 19.7.1.Instance methods(å®ä¾‹å‡½æ•°)

å¯¹è±¡çš„å®ä¾‹å‡½æ•°å¯ä»¥è®¿é—®`this`ï¼Œä¸‹é¢ä¾‹å­ä¸­`distanceTo`å‡½æ•°å°±æ˜¯å®ä¾‹å‡½æ•°ï¼š

```
import 'dart:math';

class Point {
  num x;
  num y;
  Point(this.x, this.y);

  num distanceTo(Point other) {
    var dx = x - other.x;
    var dy = y - other.y;
    return sqrt(dx * dx + dy * dy);
  }
}
å¤åˆ¶ä»£ç 
```

`Getters` å’Œ`setters`æ˜¯ç”¨æ¥è®¾ç½®å’Œè®¿é—®å¯¹è±¡å±æ€§çš„ç‰¹æ®Šå‡½æ•°ã€‚æ¯ä¸ªå®ä¾‹å˜é‡éƒ½éšå«çš„å…·æœ‰ä¸€ä¸ª`getter`ï¼Œ å¦‚æœå˜é‡ä¸æ˜¯`final`çš„åˆ™è¿˜æœ‰ä¸€ä¸ª`setter`ã€‚å¯ä»¥é€šè¿‡å®è¡Œ`getter`å’Œ`setter`æ¥åˆ›å»ºæ–°çš„å±æ€§ï¼Œ ä½¿ç”¨`get`å’Œ`set`å…³é”®å­—å®šä¹‰`getter`å’Œ`setter`ï¼š

```
class Rectangle {
  num left;
  num top;
  num width;
  num height;

  Rectangle(this.left, this.top, this.width, this.height);

  // å®šä¹‰ä¸¤ä¸ªè®¡ç®—å±æ€§ï¼šå³å’Œä¸‹ã€‚
  num get right             => left + width;
      set right(num value)  => left = value - width;
  num get bottom            => top + height;
      set bottom(num value) => top = value - height;
}

main() {
  var rect = new Rectangle(3, 4, 20, 15);
  assert(rect.left == 3);
  rect.right = 12;
  assert(rect.left == -8);
}
å¤åˆ¶ä»£ç 
```

`getter`å’Œ`setter`çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨å®ä¾‹å˜é‡ï¼Œåæ¥å¯ä»¥æŠŠå®ä¾‹å˜é‡ç”¨å‡½æ•°åŒ…è£¹èµ·æ¥ï¼Œè€Œè°ƒç”¨ä»£ç çš„åœ°æ–¹ä¸éœ€è¦ä¿®æ”¹ã€‚

##### 19.7.2.Abstract methods(æŠ½è±¡å‡½æ•°)

å®ä¾‹å‡½æ•°ã€ `getter`ã€å’Œ`setter`å‡½æ•°å¯ä»¥ä¸ºæŠ½è±¡å‡½æ•°ï¼ŒæŠ½è±¡å‡½æ•°æ˜¯åªå®šä¹‰å‡½æ•°æ¥å£ä½†æ˜¯æ²¡æœ‰å®ç°çš„å‡½æ•°ï¼Œç”±å­ç±»æ¥å®ç°è¯¥å‡½æ•°ã€‚å¦‚æœç”¨åˆ†å·æ¥æ›¿ä»£å‡½æ•°ä½“åˆ™è¿™ä¸ªå‡½æ•°å°±æ˜¯æŠ½è±¡å‡½æ•°ã€‚

```
abstract class Doer {
  // ...å®šä¹‰å®ä¾‹å˜é‡å’Œæ–¹æ³•...

  void doSomething(); // å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•.
}

class EffectiveDoer extends Doer {
  void doSomething() {
    // ...æä¾›å®ç°ï¼Œå› æ­¤æ­¤å¤„çš„æ–¹æ³•ä¸æ˜¯æŠ½è±¡çš„...
  }
}
å¤åˆ¶ä»£ç 
```

è°ƒç”¨ä¸€ä¸ªæ²¡å®ç°çš„æŠ½è±¡å‡½æ•°ä¼šå¯¼è‡´**è¿è¡Œæ—¶**å¼‚å¸¸ã€‚

#### 19.8.Overridable operators(å¯è¦†å†™çš„æ“ä½œç¬¦)

ä¸‹è¡¨ä¸­çš„æ“ä½œç¬¦å¯ä»¥è¢«è¦†å†™ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ª Vector ç±»ï¼Œ ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ª + å‡½æ•°æ¥å®ç°ä¸¤ä¸ªå‘é‡ç›¸åŠ ã€‚



![å¯è¦†å†™çš„æ“ä½œç¬¦](data:image/svg+xml;utf8,<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="900" height="386"></svg>)

ä¸‹é¢ä¸¾äº†è¦†å†™

```
+
```

å’Œ

```
-
```

æ“ä½œç¬¦çš„ç¤ºä¾‹ï¼š



```
class Vector {
  final int x;
  final int y;
  const Vector(this.x, this.y);

  /// è¦†å†™ + (a + b).
  Vector operator +(Vector v) {
    return new Vector(x + v.x, y + v.y);
  }

  /// è¦†å†™ - (a - b).
  Vector operator -(Vector v) {
    return new Vector(x - v.x, y - v.y);
  }
}

main() {
  final v = new Vector(2, 3);
  final w = new Vector(2, 2);

  // v == (2, 3)
  assert(v.x == 2 && v.y == 3);

  // v + w == (4, 5)
  assert((v + w).x == 4 && (v + w).y == 5);

  // v - w == (0, 1)
  assert((v - w).x == 0 && (v - w).y == 1);
}
å¤åˆ¶ä»£ç 
```

#### 19.9.Abstract classer(æŠ½è±¡ç±»)

ä½¿ç”¨`abstract`ä¿®é¥°ç¬¦å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸€ä¸ªä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ã€‚æŠ½è±¡ç±»é€šå¸¸ç”¨æ¥å®šä¹‰æ¥å£ï¼Œä»¥åŠéƒ¨åˆ†å®ç°ï¼Œå¦‚æœæŠ½è±¡ç±»æ˜¯å¯å®ä¾‹åŒ–çš„ï¼Œåˆ™å®šä¹‰ä¸€ä¸ª**å·¥å‚æ„é€ å‡½æ•°** æŠ½è±¡ç±»é€šå¸¸å…·æœ‰**æŠ½è±¡å‡½æ•°**ï¼Œä¸‹é¢æ˜¯å®šä¹‰å…·æœ‰æŠ½è±¡å‡½æ•°çš„æŠ½è±¡ç±»ï¼š

```
// è¿™ä¸ªç±»æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–
abstract class AbstractContainer {
  // ...å®šä¹‰æ„é€ å‡½æ•°, å˜é‡, æ–¹æ³•...

  void updateChildren(); // æŠ½è±¡æ–¹æ³•.
}
å¤åˆ¶ä»£ç 
```

ä¸‹é¢çš„ç±»ä¸æ˜¯æŠ½è±¡çš„ï¼Œä½†æ˜¯å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å‡½æ•°ï¼Œè¿™æ ·çš„åˆ—æ˜¯å¯ä»¥è¢«å®ä¾‹åŒ–ï¼š

```
class SpecializedContainer extends AbstractContainer {
  // ...å®šä¹‰æ›´å¤šçš„æ„é€ æ–¹æ³•, æ–¹æ³•...

  void updateChildren() {
    // ...å®ç° updateChildren()...
  }

  //Abstract method causes a warning but doesn't prevent instantiation.
æŠ½è±¡æ–¹æ³•å¯¼è‡´è­¦å‘Šï¼Œä½†ä¸é˜»æ­¢å®ä¾‹åŒ–ã€‚
  void doSomething();
}
å¤åˆ¶ä»£ç 
```

#### 19.10.Implicit interfaces(éšå¼æ¥å£)

æ¯ä¸ªç±»éƒ½éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®ä¾‹æˆå‘˜çš„æ¥å£ï¼Œå¹¶ä¸”è¿™ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å¦‚æœä½ æƒ³åˆ›å»ºç±»Aæ¥æ”¯æŒç±»Bçš„apiï¼Œè€Œä¸æƒ³ç»§æ‰¿ B çš„å®ç°ï¼Œ åˆ™ç±»Aåº”è¯¥å®ç°Bçš„æ¥å£ï¼š

```
// A person. éšå¼æ¥å£åŒ…å«greet().
class Person {
  // åœ¨æ¥å£ä¸­ï¼Œä½†ä»…åœ¨æ­¤åº“ä¸­å¯è§
  final _name;

  // ä¸åœ¨æ¥å£ä¸­ï¼Œå› ä¸ºè¿™æ˜¯æ„é€ å‡½æ•°
  Person(this._name);

  // åœ¨æ¥å£ä¸­
  String greet(who) => 'Hello, $who. I am $_name.';
}

// å®ç°Person æ¥å£
class Imposter implements Person {
  // æˆ‘ä»¬å¿…é¡»å®šä¹‰è¿™ä¸ªï¼Œä½†æˆ‘ä»¬ä¸ä½¿ç”¨å®ƒã€‚
  final _name = "";

  String greet(who) => 'Hi $who. Do you know who I am?';
}

greetBob(Person person) => person.greet('bob');

main() {
  print(greetBob(new Person('kathy')));
  print(greetBob(new Imposter()));
}
å¤åˆ¶ä»£ç 
```

ä¸‹é¢æ˜¯å®ç°å¤šä¸ªæ¥å£çš„ç¤ºä¾‹ï¼š

```
class Point implements Comparable, Location {
  // ...
}
å¤åˆ¶ä»£ç 
```

#### 19.11.Extending a class(æ‰©å±•ç±»)

ä½¿ç”¨`extends`å®šä¹‰å­ç±»ï¼Œ`supper`å¼•ç”¨è¶…ç±»ï¼š

```
class Television {
  void turnOn() {
    _illuminateDisplay();
    _activateIrSensor();
  }
  // ...
}

class SmartTelevision extends Television {
  void turnOn() {
    super.turnOn();
    _bootNetworkInterface();
    _initializeMemory();
    _upgradeApps();
  }
  // ...
}
å¤åˆ¶ä»£ç 
```

å­ç±»å¯ä»¥è¦†å†™å®ä¾‹å‡½æ•°ï¼Œ`getter`å’Œ`setter`ã€‚ä¸‹é¢æ˜¯è¦†å†™Objectç±»çš„`noSuchMethod()`å‡½æ•°çš„ä¾‹å­ï¼Œ å¦‚æœè°ƒç”¨äº†å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å‡½æ•°ï¼Œåˆ™å°±ä¼šè§¦å‘`noSuchMethod()`å‡½ æ•°ã€‚

```
class A {
  //é™¤éé‡å†™NoSuchMethodï¼Œå¦åˆ™ä½¿ç”¨ä¸å­˜åœ¨çš„å‡½æ•°å°†å¯¼è‡´NoSuchMethodErrorã€‚
  void noSuchMethod(Invocation mirror) {
    print('You tried to use a non-existent member:' +
          '${mirror.memberName}');
  }
}
å¤åˆ¶ä»£ç 
```

è¿˜å¯ä»¥ä½¿ç”¨`@override`æ³¨è§£æ¥è¡¨æ˜å‡½æ•°æ˜¯æƒ³è¦†å†™è¶…ç±»çš„ä¸€ä¸ªå‡½æ•°ï¼š

```
class A {
  @override
  void noSuchMethod(Invocation mirror) {
    // ...
  }
}
å¤åˆ¶ä»£ç 
```

å¦‚æœä½¿ç”¨`noSuchMethod`å‡½æ•°æ¥å®ç°æ¯ä¸ªå¯èƒ½çš„`getter`ã€setterã€ä»¥åŠå…¶ä»–ç±»å‹çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨`@proxy`æ³¨è§£æ¥é¿å…è­¦å‘Šä¿¡æ¯ï¼š

```
@proxy
class A {
  void noSuchMethod(Invocation mirror) {
    // ...
  }
}
å¤åˆ¶ä»£ç 
```

å¦‚æœè¦çŸ¥é“ç¼–è¯‘æ—¶çš„å…·ä½“ç±»å‹ï¼Œå¯ä»¥å®ç°è¿™äº›ç±»æ¥é¿å…è­¦å‘Šï¼Œå’Œä½¿ç”¨`@proxy`æ•ˆæœä¸€æ ·:

```
class A implements SomeClass, SomeOtherClass {
  void noSuchMethod(Invocation mirror) {
    // ...
  }
}
å¤åˆ¶ä»£ç 
```

#### 19.12.Enumerated types(æšä¸¾ç±»å‹)

æšä¸¾ç±»å‹é€šå¸¸ç§°ä¸º`enumerations`æˆ–è€…`enums`æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨æ¥è¡¨ç°ä¸€ä¸ªå›ºå®šæ•°ç›®çš„å¸¸é‡ã€‚ä½¿ç”¨`enum`å…³é”®å­—æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼š

```
enum Color {
  red,
  green,
  blue
}
å¤åˆ¶ä»£ç 
```

æšä¸¾ç±»å‹ä¸­çš„æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ª`index`getterå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›è¯¥å€¼åœ¨æšä¸¾ç±»å‹å®šä¹‰ä¸­çš„ä½ç½®(ä»0å¼€å§‹)ï¼Œä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å€¼çš„ä½ç½®ä¸º0ï¼Œç¬¬äºŒä¸ªä¸º1ï¼š

```
print(Color.red.index == 0); //è¾“å‡ºï¼štrue
print(Color.green.index == 1);//è¾“å‡ºï¼štrue
print(Color.blue.index == 2);//è¾“å‡ºï¼štrue
å¤åˆ¶ä»£ç 
```

æšä¸¾`values`å¸¸é‡å¯ä»¥è¿”å›æ‰€æœ‰çš„æšä¸¾å€¼

```
List<Color> colors = Color.values;
print(colors[2] == Color.blue);//è¾“å‡ºï¼štrue
å¤åˆ¶ä»£ç 
```

å¯ä»¥åœ¨`switchè¯­å¥`ä¸­ä½¿ç”¨æšä¸¾ã€‚å¦‚æœåœ¨`switch(e)`ä¸­çš„`e`çš„ç±»å‹ä¸ºæšä¸¾ç±»ï¼Œå¦‚æœæ²¡æœ‰å¤„ç†æ‰€æœ‰è¯¥æšä¸¾ç±»å‹çš„å€¼çš„è¯ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šï¼š

```
enum Color {
  red,
  green,
  blue
}
// ...
Color aColor = Color.blue;
switch (aColor) {
  case Color.red:
    print('Red as roses!');
    break;
  case Color.green:
    print('Green as grass!');
    break;
  default: // å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªè­¦å‘Š
    print(aColor);  // 'Color.blue'
}
å¤åˆ¶ä»£ç 
```

æšä¸¾ç±»å‹å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š

1. æ— æ³•ç»§æ‰¿æšä¸¾ç±»å‹ï¼Œæ— æ³•ä½¿ç”¨`mixin`ã€æ— æ³•å®ç°ä¸€ä¸ªæšä¸¾ç±»å‹
2. æ— æ³•æ˜¾ç¤ºçš„åˆå§‹åŒ–ä¸€ä¸ªæšä¸¾ç±»å‹

#### 19.13.Adding features to a classï¼šmixins(ä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½)

Mixinsæ˜¯ä¸€ç§å¤šç±»ç»§æ‰¿ä¸­é‡ç”¨ä¸€ä¸ªç±»ä»£ç çš„æ–¹æ³•ï¼Œä½¿ç”¨`with`å…³é”®å­—åé¢ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ªmixinåå­—æ¥ä½¿ç”¨mixinï¼Œä¸Šä¾‹å­å¦‚ä½•ä½¿ç”¨mixinï¼š

```
class Musician extends Performer with Musical {
  // ...
}

class Maestro extends Person
    with Musical, Aggressive, Demented {
  Maestro(String maestroName) {
    name = maestroName;
    canConduct = true;
  }
}
å¤åˆ¶ä»£ç 
```

å®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿`Object`ï¼Œè¯¥ç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä¸èƒ½è°ƒç”¨`super`ï¼Œåˆ™è¯¥ç±»å°±æ˜¯ä¸€ä¸ªmixinã€‚ä¸‹é¢ä¾‹å­ï¼š

```
abstract class Musical {
  bool canPlayPiano = false;
  bool canCompose = false;
  bool canConduct = false;

  void entertainMe() {
    if (canPlayPiano) {
      print('Playing piano');
    } else if (canConduct) {
      print('Waving hands');
    } else {
      print('Humming to self');
    }
  }
}
å¤åˆ¶ä»£ç 
```

ä»Dart1.13å¼€å§‹ï¼ŒMixinså¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸å†é™åˆ¶ä¸ºç»§æ‰¿`Object`ï¼ŒMixinså¯ä»¥è°ƒç”¨`super()`

#### 19.14.Class variables and methods(ç±»å˜é‡å’Œå‡½æ•°)

ä½¿ç”¨`static`å…³é”®å­—æ¥å®ç°çº§åˆ«çš„å˜é‡å’Œå‡½æ•°ã€‚

##### 19.14.1.Static variables(é™æ€å˜é‡)

é™æ€å˜é‡å¯¹äºç±»åˆ«çš„çŠ¶æ€æ˜¯éå¸¸æœ‰ç”¨çš„ï¼š

```
class Color {
  static const red =
      const Color('red'); // é™æ€æ„é€ å˜é‡.
  final String name;      // é™æ€å®ä¾‹å˜é‡.
  const Color(this.name); // æ„é€ æ–¹æ³•.
}

main() {
  print(Color.red.name == 'red'); //è¾“å‡ºï¼štrue
}
å¤åˆ¶ä»£ç 
```

é™æ€å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰è¢«åˆå§‹åŒ–ã€‚

##### 19.14.2.Static methods(é™æ€å‡½æ•°)

é™æ€å‡½æ•°ä¸å†å®ä¾‹æ˜¯æ‰§è¡Œï¼Œæ‰€ä»¥æ— æ³•è®¿é—®`this`:

```
import 'dart:math';

class Point {
  num x;
  num y;
  Point(this.x, this.y);

  static num distanceBetween(Point a, Point b) {
    var dx = a.x - b.x;
    var dy = a.y - b.y;
    return sqrt(dx * dx + dy * dy);
  }
}

main() {
  var a = new Point(2, 2);
  var b = new Point(4, 4);
  var distance = Point.distanceBetween(a, b);
  assert(distance < 2.9 && distance > 2.8);
}
å¤åˆ¶ä»£ç 
```

å¯¹äºé€šç”¨çš„æˆ–è€…ç»å¸¸ä½¿ç”¨çš„é™æ€å‡½æ•°ï¼Œè€ƒè™‘ä½¿ç”¨é¡¶çº§æ–¹æ³•è€Œä¸æ˜¯é™æ€å‡½æ•°ï¼Œé™æ€å‡½æ•°è¿˜å¯ä»¥å½“åšç¼–è¯‘æ—¶å¸¸é‡ä½¿ç”¨ï¼Œå¦‚ï¼šæŠŠé™æ€å‡½æ•°å½“åšå¸¸é‡æ„é€ å‡½æ•°çš„å‚æ•°æ¥ä½¿ç”¨ã€‚

### 20.æ³›å‹

åœ¨æŸ¥çœ‹`List`ç±»å‹çš„APIæ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°å®é™…çš„ç±»å‹å®šä¹‰ä¸º`List<E>`ã€‚è¿™ä¸ª`<..>`å£°æ˜listæ˜¯ä¸€ä¸ªæ³›å‹(æˆ–è€…å‚æ•°åŒ–)ç±»å‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸€ä¸ªå­—æ¯æ¥ä»£è¡¨ç±»å‹å‚æ•°ï¼Œä¾‹å¦‚Eï¼ŒTï¼ŒSï¼ŒKå’ŒVç­‰ã€‚

#### 20.1.Why use generics?(ä¸ºä½•ä½¿ç”¨æ³›å‹)

åœ¨Dartä¸­ç±»å‹æ˜¯å¯é€‰çš„ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸ç”¨æ³›å‹ã€‚æœ‰å¾ˆå¤šæƒ…å†µéƒ½è¦ä½¿ç”¨ç±»å‹è¡¨æ˜è‡ªå·±çš„æ„å›¾ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨æ³›å‹è¿˜æ˜¯å…·ä½“ç±»å‹ã€‚å¦‚ï¼Œå¦‚æœè‡ªå·±å¸Œæœ›`List`åªåŒ…å«å­—ç¬¦ä¸²å¯¹è±¡ã€‚åˆ™å¯ä»¥å®šä¹‰ä¸º`List<String>`ä»£è¡¨("list of string")ã€‚è¿™æ ·å¼€å‘å·¥å…·æˆ–è€…è‡ªå·±çš„åŒäº‹å¯ä»¥å¸®åŠ©æ£€æŸ¥è‡ªå·±çš„ä»£ç æ˜¯å¦æŠŠéå­—ç¬¦ä¸²ç±»å‹å¯¹è±¡ç»™æ”¾åˆ°è¿™ä¸ª`list`ä¸­ï¼Œå¦‚ä¸‹é¢ï¼š

```
main() {
   List Tech = new List<String>();
   Tech.addAll(['Android','IOS','Flutter']);
   Tech.add(42);//è¿è¡Œæ—¶æŠ¥é”™
}
å¤åˆ¶ä»£ç 
```

å¦å¤–ä½¿ç”¨æ³›å‹çš„åŸå› æ˜¯å‡å°‘é‡å¤ä»£ç ã€‚æ³›å‹å¯ä»¥åœ¨å¤šç§ç±»å‹ä¹‹é—´å®šä¹‰åŒä¸€ä¸ªå®ç°ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨æ£€æŸ¥æ¨¡å¼å’Œé™æ€åˆ†æå·¥å…·æä¾›çš„ä»£ç åˆ†æåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªä¿å­˜ç¼“å­˜å¯¹è±¡çš„æ¥å£ï¼š

```
abstract class ObjectCache {
  Object getByKey(String key);
  setByKey(String key, Object value);
}
å¤åˆ¶ä»£ç 
```

åæ¥å‘ç°éœ€è¦ä¸€ä¸ªç”¨æ¥ç¼“å­˜å­—ç¬¦ä¸²çš„å®ç°ï¼Œé‚£åˆè¦å®šä¹‰ä¸€ä¸ªæ¥å£ï¼š

```
abstract class StringCache {
  String getByKey(String key);
  setByKey(String key, String value);
}
å¤åˆ¶ä»£ç 
```

ç„¶è€Œï¼Œåˆéœ€è¦ç”¨ä¸€ä¸ªç”¨æ¥ç¼“å­˜æ•°å­—çš„å®ç°ï¼Œåœ¨åæ¥ï¼Œåˆéœ€è¦å¦å¤–ä¸€ä¸ªç±»å‹çš„ç¼“å­˜å®ç°ï¼Œç­‰ç­‰ã€‚ã€‚ã€‚è¿™æ—¶å€™ï¼Œæ³›å‹çš„å¦ä¸€ä¸ªä½œç”¨ä½“ç°å‡ºæ¥äº†ï¼Œæ³›å‹å¯ä»¥é¿å…è¿™ç§é‡å¤ä»£ç ï¼Œä¾‹å­ä¸Šï¼š

```
abstract class Cache<T> {
  T getByKey(String key);
  setByKey(String key, T value);
}
å¤åˆ¶ä»£ç 
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`T`æ˜¯ä¸€ä¸ªå¤‡ç”¨ç±»å‹ï¼Œè¿™æ˜¯ç±»å‹å ä½ç¬¦ï¼Œè‡ªå·±è°ƒç”¨è¯¥æ¥å£çš„æ—¶å€™ä¼šæŒ‡å®šå…·ä½“ç±»å‹ã€‚

#### 20.2.Using collection literals(ä½¿ç”¨é›†åˆå­—é¢é‡)

`List`å’Œ`Map`å­—é¢é‡ä¹Ÿæ˜¯å¯ä»¥å‚æ•°åŒ–çš„ã€‚å‚æ•°åŒ–å®šä¹‰listéœ€è¦åœ¨ä¸­æ‹¬å·ä¹‹é—´æ·»åŠ `<type>`ï¼Œå®šä¹‰mapéœ€è¦åœ¨å¤§æ‹¬å·ä¹‹å‰æ·»åŠ <KeyType,valueType>ã€‚å¦‚æœä½ éœ€è¦æ›´åŠ å®‰å…¨çš„ç±»å‹æ£€æŸ¥ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å‚æ•°åŒ–å®šä¹‰ã€‚ä¾‹å­å¦‚ä¸‹ï¼š

```
var names = <String>['Seth', 'Kathy', 'Lars'];
var pages = <String, String>{
  'index.html': 'Homepage',
  'robots.txt': 'Hints for web robots',
  'humans.txt': 'We are people, not machines'
};
å¤åˆ¶ä»£ç 
```

#### 20.3.Using parameterized types with constructors(æ„é€ å‡½æ•°ä¸­ä½¿ç”¨æ³›å‹)

åœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œåœ¨ç±»åå­—åé¢ä½¿ç”¨å°–æ‹¬å·(<...>)æ¥æŒ‡å®šæ³›å‹ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```
var names = new List<String>();
names.addAll(['Seth', 'Kathy', 'Lars']);
var nameSet = new Set<String>.from(names);
å¤åˆ¶ä»£ç 
```

ä¸‹é¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ª`key`ä¸º`integer`,`value`ä¸º`View`ç±»å‹çš„mapï¼š

```
var views = new Map<int, View>();
å¤åˆ¶ä»£ç 
```

#### 20.4.Generic collections and the types they contain(æ³›å‹é›†åˆå’ŒåŒ…å«çš„ç±»å‹)

Dartçš„æ³›å‹ç±»å‹æ˜¯å›ºåŒ–çš„ï¼Œåœ¨è¿è¡Œæ—¶æœ‰ä¹Ÿå¯ä»¥åˆ¤æ–­å…·ä½“çš„ç±»å‹ï¼Œä¾‹å¦‚åœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥æ£€æµ‹é›†åˆé‡Œé¢çš„å¯¹è±¡ç±»å‹ï¼š

```
var names = new List<String>();
names.addAll(['Seth', 'Kathy', 'Lars']);
print(names is List<String>); // è¾“å‡ºï¼štrue
å¤åˆ¶ä»£ç 
```

`is`è¡¨è¾¾å¼åªæ˜¯åˆ¤æ–­é›†åˆçš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆé‡Œé¢å…·ä½“å¯¹è±¡çš„ç±»å‹ã€‚åœ¨æˆäº§æ¨¡å¼ï¼Œ`List<String>`å˜é‡å¯ä»¥åŒ…å«éå­—ç¬¦ä¸²ç±»å‹å¯¹è±¡ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå¯ä»¥é€‰æ‹©åˆ†åŒ…åˆ¤æ–­æ¯ä¸ªå¯¹è±¡çš„ç±»å‹æˆ–è€…å¤„ç†ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œ`java`ä¸­çš„æ³›å‹ä¿¡æ¯æ˜¯ç¼–è¯‘æ—¶çš„ï¼Œæ³›å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶æ˜¯ä¸çº¯åœ¨ã€‚åœ¨`java`ä¸­å¯ä»¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º`List`ï¼Œä½†æ˜¯æ— æ³•æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º`List<String>`ã€‚

#### 20.5.Restricting the parameterrized type(é™åˆ¶æ³›å‹ç±»å‹)

å½“ä½¿ç”¨æ³›å‹ç±»å‹çš„æ—¶å€™ï¼Œå¯èƒ½æƒ³é™åˆ¶æ³›å‹çš„å…·ä½“ç±»å‹ï¼Œä½¿ç”¨`extends`å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š

```
// Tå¿…é¡»æ˜¯SomebaseClassæˆ–å…¶åä»£ä¹‹ä¸€ã€‚
class Foo<T extends SomeBaseClass> {...}

class Extender extends SomeBaseClass {...}

void main() {
  // å¯ä»¥åœ¨<>ä¸­ä½¿ç”¨somebaseclassæˆ–å®ƒçš„ä»»ä½•å­ç±»ã€‚
  var someBaseClassFoo = new Foo<SomeBaseClass>();
  var extenderFoo = new Foo<Extender>();

  //ä¹Ÿå¯ä»¥ä½¿ç”¨no<>
  var foo = new Foo();



   //æŒ‡å®šä»»ä½•éSomeBaseClassç±»å‹å°†å¯¼è‡´è­¦å‘Šï¼Œåœ¨Debugæ£€æŸ¥æ¨¡å¼ï¼Œè¿è¡Œæ—¶é”™è¯¯ã€‚
  // var objectFoo = new Foo<Object>();
}
å¤åˆ¶ä»£ç 
```

#### 20.6.Using generic method(ä½¿ç”¨æ³›å‹å‡½æ•°)

ä¸€å¼€å§‹ï¼Œæ³›å‹åªèƒ½åœ¨`Dart`ç±»ä¸­ä½¿ç”¨ã€‚æ–°çš„è¯­æ³•ä¹Ÿæ”¯æŒåœ¨å‡½æ•°å’Œæ–¹æ³•ä¸Šä½¿ç”¨æ³›å‹ã€‚

```
T first<T>(List<T> ts) {
  // ...åšä¸€äº›åˆå§‹åŒ–å·¥ä½œæˆ–è€…é”™è¯¯æ£€æŸ¥...
  T tmp ?= ts[0];
  // ...åšä¸€äº›é¢å¤–çš„æ£€æŸ¥æˆ–è€…å¤„ç†...
  return tmp;
}
å¤åˆ¶ä»£ç 
```

è¿™é‡Œ`first(<T>)`æ³›å‹å¯ä»¥åœ¨å¦‚ä¸‹åœ°æ–¹ä½¿ç”¨å‚æ•°`T`ï¼š

- å‡½æ•°çš„è¿”å›å€¼ç±»å‹(`T`)
- å‚æ•°çš„ç±»å‹(`List<T>`)
- å±€éƒ¨å˜é‡çš„ç±»å‹(`T tmp`)

åœ¨Dart1.21å¼€å§‹ä½¿ç”¨æ³›å‹å‡½æ•°ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ³›å‹å‡½æ•°ï¼Œéœ€è¦è®¾ç½®SDKç‰ˆæœ¬ä¸º1.21æˆ–è€…ä»¥ä¸Šã€‚

### 21.Libraries and visibility(åº“å’Œå¯è§æ€§)

ä½¿ç”¨`import`å’Œ`library`æŒ‡ä»¤å¯ä»¥å¸®åŠ©åˆ›å»ºæ¨¡å—åŒ–çš„å¯åˆ†äº«ä»£ç ã€‚åº“ä¸ä»…ä»…æä¾›`API`ï¼Œè¿˜æ˜¯ä¸€ä¸ªç§æœ‰å•å…ƒï¼šä»¥ä¸‹åˆ’çº¿`(_)`å¼€å¤´çš„æ ‡è¯†ç¬¦åªæœ‰åœ¨åº“å†…éƒ¨å¯è§ã€‚æ¯ä¸ª`Dart app`éƒ½æ˜¯ä¸€ä¸ªåº“ï¼Œå³ä½¿æ²¡æœ‰ä½¿ç”¨`library`å‘½ä»¤ä¹Ÿæ˜¯ä¸€ä¸ªåº“ã€‚è¿™é‡Œçš„åº“å’ŒAndroidæ‰€è¯´çš„åº“æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œç®€å•æ¥è®²å°±æ˜¯ç”¨äººå®¶å†™å¥½åº“ä¸­çš„`API`ã€‚ä¾‹å¦‚ï¼šæ‹ç…§åº“ï¼Œç½‘ç»œè¯·æ±‚åº“ç­‰ã€‚

#### 21.1.Using libraries(ä½¿ç”¨åº“)

ä½¿ç”¨`import`æ¥æŒ‡å®šä¸€ä¸ªåº“å¦‚ä½•ä½¿ç”¨å¦å¤–ä¸€ä¸ªåº“ï¼Œä¾‹å¦‚ï¼š`Dart web`åº”ç”¨é€šå¸¸ä½¿ç”¨`dart:html`åº“ï¼Œç„¶åå¯ä»¥è¿™æ ·å¯¼å…¥åº“ï¼š

```
import 'dart:html';
å¤åˆ¶ä»£ç 
```

`import`å¿…é¡»å‚æ•°ä¸ºåº“çš„URLã€‚å¯¹äºå†…ç½®çš„åº“ï¼ŒURIä½¿ç”¨ç‰¹æ®Šçš„`dart:scheme`ã€‚å¯¹äºå…¶ä»–çš„åº“ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æˆ–è€…`package:scheme`ã€‚`package:scheme`æŒ‡å®šçš„åº“é€šè¿‡åŒ…ç®¡ç†å™¨æ¥æä¾›ï¼Œå¦‚`pub`å·¥å…·ï¼Œå¦‚ï¼š

```
import 'dart:io';
import 'package:mylib/mylib.dart';
import 'package:utils/utils.dart';
å¤åˆ¶ä»£ç 
```

#### 21.2.Specifying a library prefix(æŒ‡å®šåº“å‰ç¼€)

å¦‚æœå¯¼å…¥çš„åº“å…·æœ‰å†²çªçš„æ ‡è¯†ç¬¦ï¼Œè¿™ä¸ªç»å¸¸é‡åˆ°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åº“çš„å‰ç¼€æ¥åŒºåˆ†ã€‚ä¾‹å¦‚ï¼šå¦‚æœ`library1`å’Œ`library2`éƒ½æœ‰ä¸€ä¸ªåå­—ä¸º`Element`çš„ç±»ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```
import 'package:lib1/lib1.dart';
import 'package:lib2/lib2.dart' as lib2;
// ...
Element element1 = new Element();           // ä½¿ç”¨ lib1 ä¸­çš„ Element .
lib2.Element element2 = new lib2.Element(); // ä½¿ç”¨ lib2 ä¸­çš„ Element.
å¤åˆ¶ä»£ç 
```

#### 21.3.Importing only part of a library(å¯¼å…¥åº“çš„ä¸€éƒ¨åˆ†)

å¦‚æœåªä½¿ç”¨åº“çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©éœ€è¦å¯¼å…¥çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š

```
// ä»…å¯¼å…¥foo
import 'package:lib1/lib1.dart' show foo;

// å¯¼å…¥é™¤fooä»¥å¤–çš„æ‰€æœ‰åç§°ã€‚
import 'package:lib2/lib2.dart' hide foo;
å¤åˆ¶ä»£ç 
```

#### 21.4.Lazily loading a library(å»¶è¿Ÿè½½å…¥åº“)

`Deferred loading`å¯ä»¥è®©åº”ç”¨åœ¨éœ€è¦çš„æ—¶å€™å†åŠ è½½åº“ã€‚è¿™æˆ‘å°±æƒ³åˆ°äº†Appçš„å¼€å¯æ—¶é—´ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨å»¶è¿ŸåŠ è½½åº“çš„åœºæ™¯ï¼š

- å‡å°‘APPçš„å¯åŠ¨æ—¶é—´
- æ‰§è¡ŒA/Bæµ‹è¯•ï¼Œä¾‹å¦‚å°è¯•å„ç§ç®—æ³•çš„ä¸åŒå®ç°
- åŠ è½½å¾ˆå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¯é€‰çš„å±å¹•å’Œå¯¹è¯æ¡†

å»¶è¿ŸåŠ è½½ä¸€ä¸ªåº“ï¼Œéœ€è¦å…ˆä½¿ç”¨`deferred as`æ¥å¯¼å…¥ï¼š

```
import 'package:deferred/hello.dart' deferred as hello;
å¤åˆ¶ä»£ç 
```

å½“éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨åº“æ ‡è¯†ç¬¦è°ƒç”¨`loadLibrary()`å‡½æ•°æ¥åŠ è½½åº“ï¼š

```
greet() async {
  await hello.loadLibrary();
  hello.printGreeting();
}
å¤åˆ¶ä»£ç 
```

åœ¨ä¸Šé¢ä»£ç ï¼Œä½¿ç”¨`await`å…³é”®å­—æš‚åœä»£ç æ‰§è¡Œä¸€ç›´åˆ°åº“åŠ è½½å®Œæˆã€‚åœ¨ä¸€ä¸ªåº“ä¸Šå¯ä»¥å¤šæ¬¡è°ƒç”¨`loadLibrary()`å‡½æ•°ã€‚ä½†æ˜¯è¯¥åº“åªæ˜¯è½½å…¥ä¸€æ¬¡ã€‚åœ¨ä½¿ç”¨å»¶è¿ŸåŠ è½½åº“çš„æ—¶å€™ï¼Œè¦æ³¨æ„ï¼š

- å»¶è¿ŸåŠ è½½åº“çš„å¸¸é‡åœ¨å¯¼å…¥çš„æ—¶å€™æ˜¯ä¸å¯ç”¨çš„ã€‚åªæœ‰å½“åº“åŠ è½½å®Œæ¯•çš„æ—¶å€™ï¼Œåº“ä¸­å¸¸é‡æ‰å¯ä»¥ä½¿ç”¨ã€‚
- åœ¨å¯¼å…¥æ–‡ä»¶çš„æ—¶å€™æ— æ³•ä½¿ç”¨å»¶è¿Ÿåº“ä¸­çš„ç±»å‹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ç±»å‹ï¼Œåˆ™è€ƒè™‘æŠŠæ¥å£ç±»å‹ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåº“ä¸­ï¼Œ è®©ä¸¤ä¸ªåº“éƒ½åˆ†åˆ«å¯¼å…¥è¿™ä¸ªæ¥å£åº“ã€‚
- Dartéšå«çš„æŠŠ`loadLibrary()`å‡½æ•°å¯¼å…¥åˆ°ä½¿ç”¨`deferred as å‘½åç©ºé—´`ã€‚`loadLibrary()`æ–¹æ³•è¿”å›ä¸€ä¸ª`Future`ã€‚

### 22.Asynchrony support(å¼‚æ­¥æ”¯æŒ)

Dartæœ‰ä¸€äº›è¯­è¨€ç‰¹æ€§æ¥æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ã€‚æœ€å¸¸è§çš„ç‰¹æ€§æ˜¯`async`æ–¹æ³•å’Œ`await`è¡¨è¾¾å¼ã€‚Dartåº“ä¸­æœ‰å¾ˆå¤šè¿”å›Futureæˆ–è€…Streamå¯¹è±¡çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•æ˜¯å¼‚æ­¥ï¼šè¿™äº›å‡½æ•°åœ¨è®¾ç½®å®ŒåŸºæœ¬çš„æ“ä½œåå°±è¿”å›äº†ï¼Œè€Œæ— éœ€ç­‰å¾…æ‰§è¡Œå®Œæˆã€‚ä¾‹å¦‚è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨æ‰“å¼€æ–‡ä»¶åå°±è¿”å›äº†ã€‚æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ä½¿ç”¨Futureå¯¹è±¡ä¸­çš„æ•°æ®ï¼š

- ä½¿ç”¨`async`å’Œ`await`
- ä½¿ç”¨Future API

åŒæ ·ï¼Œä»Streamä¸­è·å–æ•°æ®ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š

- ä½¿ç”¨`async`å’Œä¸€ä¸ªå¼‚æ­¥forå¾ªç¯(`await for`)
- ä½¿ç”¨Stream API

ä½¿ç”¨`async`å’Œ`await`çš„ä»£ç æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯çœ‹èµ·æ¥æœ‰ç‚¹åƒåŒæ­¥ä»£ç ã€‚å¦‚ï¼šä¸‹é¢æ˜¯ä½¿ç”¨`await`æ¥ç­‰å¾…å¼‚æ­¥æ–¹æ³•è¿”å›çš„ç¤ºä¾‹ï¼š

```
await lookUpVersion()
å¤åˆ¶ä»£ç 
```

è¦ä½¿ç”¨`await`ï¼Œå…¶æ–¹æ³•å¿…é¡»å¸¦æœ‰`async`å…³é”®å­—ï¼š

```
checkVersion() async {
  var version = await lookUpVersion();
  if (version == expectedVersion) {
    // ä¸»ä½“å†…å®¹.
  } else {
    // ä¸»ä½“å†…å®¹.
  }
}
å¤åˆ¶ä»£ç 
```

å¯ä»¥ä½¿ç”¨`try`,`catch`å’Œ`finally`æ¥å¤„ç†ä½¿ç”¨`await`çš„å¼‚å¸¸ï¼š

```
try {
  server = await HttpServer.bind(InternetAddress.LOOPBACK_IP_V4, 4044);
} catch (e) {
  // å¯¹æ— æ³•ç»‘å®šåˆ°ç«¯å£ä½œå‡ºååº”...
}
å¤åˆ¶ä»£ç 
```

#### 22.1.Declaring async functions(å£°æ˜å¼‚æ­¥æ–¹æ³•)

ä¸€ä¸ª`async`æ–¹æ³•æ˜¯å‡½æ•°ä½“è¢«æ ‡è®°ä¸º`async`çš„æ–¹æ³•ã€‚è™½ç„¶å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œå¯èƒ½éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä½†æ˜¯å¼‚æ­¥æ–¹æ³•ç«‹åˆ»è¿”å›-åœ¨æ–¹æ³•ä½“è¿˜æ²¡æ‰§è¡Œä¹‹å‰å°±è¿”å›äº†ã€‚

```
checkVersion() async {
  // ...
}

lookUpVersion() async => /* ... */;
å¤åˆ¶ä»£ç 
```

åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šæ·»åŠ `async`å…³é”®å­—ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸ºFutureã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè¿”å›å­—ç¬¦ä¸²çš„åŒæ­¥æ–¹æ³•ï¼š

```
String lookUpVersionSync() => '1.0.0';
å¤åˆ¶ä»£ç 
```

å¦‚æœä½¿ç”¨`async`å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªFutureï¼Œå¹¶ä¸”è®¤ä¸ºè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªè€—æ—¶æ“ä½œã€‚

```
Future<String> lookUpVersion() async => '1.0.0';
å¤åˆ¶ä»£ç 
```

æ³¨æ„ï¼Œæ–¹æ³•çš„å‡½æ•°ä½“å¹¶å¹¶ä¸éœ€è¦ä½¿ç”¨FutureAPIã€‚Dartè‡ªåŠ¨åœ¨éœ€è¦çš„æ—¶å€™åˆ›å»ºFutureå¯¹è±¡ã€‚

#### 22.2.Using await expressions with Futures(ä½¿ç”¨awaitè¡¨è¾¾å¼)

awaitè¡¨è¾¾å¼å…·æœ‰å¦‚ä¸‹çš„å½¢å¼ï¼š

```
await expression
å¤åˆ¶ä»£ç 
```

åœ¨ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•å†…å¯ä»¥ä½¿ç”¨å¤šæ¬¡`await`è¡¨è¾¾æ°´ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨ä¸‰æ¬¡`await`è¡¨è¾¾å¼æ¥æ‰§è¡Œç›¸å…³çš„åŠŸèƒ½ï¼š

```
var entrypoint = await findEntrypoint();
var exitCode = await runExecutable(entrypoint, args);
await flushThenExit(exitCode);
å¤åˆ¶ä»£ç 
```

åœ¨`await expression`ä¸­ï¼Œ`expression`çš„è¿”å›å€¼é€šå¸¸æ˜¯ä¸€ä¸ªFutureï¼›å¦‚æœè¿”å›çš„å€¼ä¸æ˜¯Futureï¼Œåˆ™Dartä¼šè‡ªåŠ¨æŠŠè¯¥å€¼æ”¾åˆ°Futureä¸­è¿”å›ã€‚Futureå¯¹è±¡ä»£è¡¨è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰¿è¯ºã€‚`await expression`æ‰§è¡Œçš„ç»“æœä¸ºè¿™ä¸ªè¿”å›çš„å¯¹è±¡ã€‚`await expression`ä¼šé˜»å¡ä¸»ï¼Œç›´åˆ°éœ€è¦çš„å¯¹è±¡è¿”å›ä¸ºæ­¢ã€‚å¦‚æœ`await`æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œè¯·ç¡®ä¿æ˜¯åœ¨ä¸€ä¸ª`async`æ–¹æ³•ä¸­ã€‚ä¾‹å¦‚è¦åœ¨`main()`æ–¹æ³•ä¸­ä½¿ç”¨`await`ï¼Œåˆ™`main()`æ–¹æ³•çš„å‡½æ•°ä½“å¿…é¡»æ ‡è®°ä¸º`async`:

```
main() async {
  checkVersion();
  print('In main: version is ${await lookUpVersion()}');
}
å¤åˆ¶ä»£ç 
```

#### 22.3.Using asynchronous for loops with Stream(åœ¨å¾ªç¯ä¸­ä½¿ç”¨å¼‚æ­¥)

å¼‚æ­¥forå¾ªç¯å…·æœ‰ä»¥ä¸‹å½¢å¼ï¼š

```
await for (variable declaration in expression) {
  // æ¯æ¬¡æµå‘å‡ºæ—¶ä¼šæ‰§è¡Œ.
}
å¤åˆ¶ä»£ç 
```

ä¸Šé¢çš„`expression`è¿”å›çš„å€¼å¿…é¡»æ˜¯Streamç±»å‹ã€‚æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š

1. ç­‰å¾…ç›´åˆ°streamè¿”å›ä¸€ä¸ªæ•°æ®
2. ä½¿ç”¨streamè¿”å›çš„å‚æ•°æ‰§è¡Œforå¾ªç¯ä»£ç 
3. é‡å¤æ‰§è¡Œ1å’Œ2ç›´åˆ°streamæ•°æ®è¿”å›å®Œæ¯•

ä½¿ç”¨`break`æˆ–è€…`return`è¯­å¥å¯ä»¥åœæ­¢æ¥æ”¶streamæ•°æ®ï¼Œè¿™æ ·å°±æŒ‘å‡ºäº†forå¾ªç¯å¹¶ä¸”ä»streamä¸Šå–æ¶ˆæ³¨å†Œäº†ã€‚å¦‚æœ**å¼‚æ­¥forå¾ªç¯ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œç¡®ä¿æ˜¯åœ¨ä¸€ä¸ªasyncæ–¹æ³•ä¸­ä½¿ç”¨ã€‚**å¦‚ï¼šè¦æƒ³åœ¨`main()`æ–¹æ³•ä¸­ä½¿ç”¨å¼‚æ­¥forå¾ªç¯ï¼Œåˆ™éœ€è¦æŠŠ`main()`æ–¹æ³•çš„å‡½æ•°ä½“æ ‡è®°ä¸º`async`ï¼š

```
main() async {
  ...
  await for (var request in requestServer) {
    handleRequest(request);
  }
  ...
}
å¤åˆ¶ä»£ç 
```

### 23.Callable classes(å¯è°ƒç”¨çš„ç±»)

å¦‚æœDartç±»å®ç°`call()`å‡½æ•°åˆ™å¯ä»¥å½“åšæ–¹æ³•æ¥è°ƒç”¨ï¼Œä¸‹é¢ä¾‹å­ä¸­ï¼Œ`wannabeFunction`ç±»å®šä¹‰äº†ä¸€ä¸ª`call()`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸‰ä¸ªå­—ç¬¦ä¸²ä¸²è”èµ·æ¥çš„ç»“æœ:

```
class WannabeFunction {
  call(String a, String b, String c) => '$a $b $c!';
}

main() {
  var wf = new WannabeFunction();
  var out = wf("Hi","there,","gang");
  print('$out');   //è¾“å‡º:Hi there, gang!
}
å¤åˆ¶ä»£ç 
```

### 24.Isolates

ç°ä»£çš„æµè§ˆå™¨å’Œç§»åŠ¨æµè§ˆå™¨è¿è¡Œåœ¨å¤šæ ¸CPUç³»ç»Ÿä¸Šã€‚è¦å……åˆ†åˆ©ç”¨è¿™äº›CPUï¼Œå¼€å‘è€…ä¸€èˆ¬ä½¿ç”¨å…±äº«å†…å­˜æ•°æ®æ¥çˆ†ç‚¸å¤šçº¿ç¨‹çš„æ­£ç¡®è¿è¡Œã€‚ç„¶è€Œï¼Œå¤šçº¿ç¨‹å…±äº«æ•°æ®é€šå¸¸ä¼šå¯¼è‡´å¾ˆå¤šæ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶å¯¼è‡´ä»£ç è¿è¡Œå‡ºé”™ï¼Œç»“æœä¸æ˜¯é¢„æœŸã€‚æ‰€æœ‰çš„Dartä»£ç åœ¨`isolates`ä¸­è¿è¡Œè€Œä¸æ˜¯çº¿ç¨‹ï¼Œæ¯ä¸ª`isolate`éƒ½æœ‰è‡ªå·±çš„å †å†…å­˜ï¼Œå¹¶ä¸”ç¡®ä¿æ¯ä¸ª`isolate`çš„çŠ¶æ€éƒ½ä¸èƒ½è¢«å…¶ä»–`isolate`è®¿é—®ã€‚

### 25.Typedefs

åœ¨Dartè¯­è¨€ä¸­ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ã€‚ä½¿ç”¨`typedef`æˆ–è€…`function-type-alias`æ¥ä¸ºæ–¹æ³•ç±»å‹å‘½åï¼Œç„¶åå¯ä½¿ç”¨å‘½åçš„æ–¹æ³•ï¼Œå½“æŠŠæ–¹æ³•ç±»å‹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œ`typedef`ä¿ç•™ç±»å‹ä¿¡æ¯ã€‚ä¸‹é¢ä»£ç æ²¡æœ‰ä½¿ç”¨`typedef`:

```
class SortedCollection {
  Function compare;

  SortedCollection(int f(Object a, Object b)) {
    compare = f;
  }
}

 // Initial, broken implementation.
 int sort(Object a, Object b) => 0;

main() {
  SortedCollection coll = new SortedCollection(sort);

  // æˆ‘ä»¬åªçŸ¥é“ compare æ˜¯ä¸€ä¸ª Function ç±»å‹ï¼Œ
  // ä½†æ˜¯ä¸çŸ¥é“å…·ä½“æ˜¯ä½•ç§ Function ç±»å‹ï¼Ÿ
  assert(coll.compare is Function);
}
å¤åˆ¶ä»£ç 
```

å½“æŠŠ`f`èµ‹å€¼ç»™`compare`çš„æ—¶å€™ï¼Œç±»å‹ä¿¡æ¯ä¸¢å¤±äº†ï¼Œ`f`çš„ç±»å‹æ˜¯`(object,object)->int`å½“ç„¶è¯¥ç±»å‹æ˜¯ä¸€ä¸ª`Function`ã€‚å¦‚æœä½¿ç”¨æ˜¾å¼çš„åå­—å¹¶ä¿ç•™ç±»å‹ä¿¡æ¯ï¼Œå¼€å‘è€…å’Œå·¥å…·å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼š

```
typedef int Compare(Object a, Object b);

class SortedCollection {
  Compare compare;

  SortedCollection(this.compare);
}

 // Initial, broken implementation.
 int sort(Object a, Object b) => 0;

main() {
  SortedCollection coll = new SortedCollection(sort);
  assert(coll.compare is Function);
  assert(coll.compare is Compare);
}
å¤åˆ¶ä»£ç 
```

### 26.Metadata(å…ƒæ•°æ®)

ä½¿ç”¨å…ƒæ•°æ®ç»™ä»£ç æ·»åŠ é¢å¤–ä¿¡æ¯ï¼Œå…ƒæ•°æ®æ³¨è§£æ˜¯ä»¥`@`å­—ç¬¦å¼€å¤´ï¼Œåé¢æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡æˆ–è€…è°ƒç”¨ä¸€ä¸ªå¸¸é‡æ„é€ å‡½æ•°ã€‚æœ‰ä¸‰ä¸ªæ³¨è§£æ‰€æœ‰çš„Dartä»£ç éƒ½å¯ä½¿ç”¨ï¼š`@deprecated`ã€`@override`ï¼Œ`@proxy`,ä¸‹é¢ç›´æ¥ä¸Š`@deprecated`çš„ç¤ºä¾‹ï¼š

```
class Television {
  /// å·²ç»å¼ƒç”¨ï¼Œè¯·æ”¹ç”¨[æ‰“å¼€]
  @deprecated
  void activate() {
    turnOn();
  }

  /// æ‰“å¼€ç”µè§†.
  void turnOn() {
    print('on!');
  }
}
å¤åˆ¶ä»£ç 
```

å¯ä»¥å®šä¹‰è‡ªå·±çš„å…ƒæ•°æ®æ³¨è§£ã€‚ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„`@todo`æ³¨è§£ï¼š

```
library todo;

class todo {
  final String who;
  final String what;

  const todo(this.who, this.what);
}

å¤åˆ¶ä»£ç 
```

ä½¿ç”¨`@todo`æ³¨è§£çš„ç¤ºä¾‹ï¼š

```
import 'todo.dart';

@todo('seth', 'make this do something')
void doSomething() {
  print('do something');
}
å¤åˆ¶ä»£ç 
```

å…ƒæ•°æ®å¯ä»¥åœ¨`library`ã€`typedef`ã€`type parameter`ã€`constructor`ã€`factory`ã€`function`ã€`field`ã€`parameter`ã€æˆ–è€…`variable`å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨`import`æˆ–è€…`export`æŒ‡ä»¤ä¹‹å‰ä½¿ç”¨ï¼Œä½¿ç”¨åå°„å¯ä»¥å†è¿è¡Œæ—¶è·å–å…ƒæ•°æ®ä¿¡æ¯ã€‚

## äº”ã€æ€»ç»“

Dartè¯­æ³•å’ŒJavaè¯­æ³•å¾ˆåƒï¼Œå¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œç†è§£å¾ˆç®€å•ï¼Œç”¨ä¸€å¤©å°±æŠŠè¯­æ³•æ•´ç†äº†ä¸€éï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦å­¦ä¹ `Dart`è¯­æ³•å‘¢ï¼Ÿä¸€å¼€å§‹è§£é‡Šå¾ˆæ¸…æ¥šäº†ï¼Œæ— éå°±æ˜¯æŠŠæ ¹åŸºæ‰“ç¨³ã€‚å­¦ä»€ä¹ˆä¸€å®šè¦å¸¦æœ‰ç›®çš„æ€§å»å­¦ï¼Œä¸‹é¢ç›´æ¥ä¸Šä¸€å¼ å›¾ï¼š



![å¸¦æœ‰ç›®çš„æ€§å»å­¦](https://user-gold-cdn.xitu.io/2019/2/7/168c7c1a7db222fa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



å­¦ä¹ èµ„æºï¼š

1. [èµ·æ­¥-Dart](https://link.juejin.im/?target=http%3A%2F%2Fdart.goodev.org%2Fguides%2Fget-started)
2. [ä¸ºjavaå¼€å‘äººå‘˜å‡†å¤‡çš„Dartæ•™ç¨‹](https://link.juejin.im/?target=https%3A%2F%2Fcodelabs.flutter-io.cn%2Fcodelabs%2Ffrom-java-to-dart-cn%2Findex.html%236)

## å…­ã€é¢å¤–çŸ¥è¯†

Flutteræœ‰å››ç§è¿è¡Œæ¨¡å¼ï¼šDebugã€Releaseã€Profileå’Œtestã€‚

1. Debugï¼šDebugæ¨¡å¼å¯ä»¥åœ¨çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¸ŠåŒæ—¶è¿è¡Œï¼šä¼šæ‰“å¼€æ‰€æœ‰çš„æ–­è¨€ï¼ŒåŒ…æ‹¬debuggingä¿¡æ¯ã€debugger aidsï¼ˆæ¯”å¦‚observatoryï¼‰å’ŒæœåŠ¡æ‰©å±•ã€‚
2. Releaseï¼šReleaseæ¨¡å¼åªèƒ½åœ¨çœŸæœºä¸Šè¿è¡Œï¼Œä¸èƒ½åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼šä¼šå…³é—­æ‰€æœ‰æ–­è¨€å’Œdebuggingä¿¡æ¯ï¼Œå…³é—­æ‰€æœ‰debuggerå·¥å…·ã€‚
3. Profileï¼šProfileæ¨¡å¼åªèƒ½åœ¨çœŸæœºä¸Šè¿è¡Œï¼Œä¸èƒ½åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼šåŸºæœ¬å’ŒReleaseæ¨¡å¼ä¸€è‡´ã€‚
4. testï¼š headless testæ¨¡å¼åªèƒ½åœ¨æ¡Œé¢ä¸Šè¿è¡Œï¼šåŸºæœ¬å’ŒDebugæ¨¡å¼ä¸€è‡´ã€‚

[Flutterå››ç§è¿è¡Œæ–¹å¼](https://link.juejin.im/?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F4db65478aaa3)